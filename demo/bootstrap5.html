<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Bootstrap TouchSpin - Bootstrap 5 Demo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Bootstrap TouchSpin demo with Bootstrap 5.3.0">

  <link rel="shortcut icon" href="favicon.ico">

  <!-- jQuery -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>

  <!-- Bootstrap 5.3.0 -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>

  <!-- Bootstrap Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.10.5/font/bootstrap-icons.min.css">

  <!-- TouchSpin Bootstrap 5 Specific Build -->
  <link href="../dist/jquery.bootstrap-touchspin.css" rel="stylesheet">
  <script src="../dist/jquery.touchspin-bs5.js"></script>

  <!-- Demo CSS -->
  <link href="demo.css" rel="stylesheet">

  <style>
    .demo-version-badge {
      background: #6f42c1;
      color: white;
      padding: 8px 16px;
      border-radius: 0.375rem;
      display: inline-block;
      margin: 10px 0;
      font-weight: bold;
    }
    .demo-section {
      margin: 30px 0;
      padding: 20px;
      border: 1px solid #dee2e6;
      border-radius: 0.5rem;
    }
    .demo-example {
      margin: 20px 0;
      padding: 15px;
      background: #f8f9fa;
      border: 1px solid #e9ecef;
      border-radius: 0.375rem;
    }
    .version-info {
      background: #e7f3ff;
      border: 1px solid #b8daff;
      border-radius: 0.5rem;
      padding: 15px;
      margin: 20px 0;
    }
    .hero-unit {
      text-align: center;
      margin: 0 0 50px;
      padding: 60px 0;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border-radius: 1rem;
    }
    .hero-unit .lead {
      font-size: 1.25rem;
      opacity: 0.9;
    }
    .hero-unit .btn {
      margin: 5px;
    }
    .hint {
      font-size: .9rem;
      color: #6c757d;
    }
  </style>
</head>

<body>
<div class="container">
  <div class="hero-unit">
    <h1 class="display-3 fw-bold">Bootstrap TouchSpin</h1>
    <div class="demo-version-badge">Bootstrap 5.3.0 Demo</div>
    <p class="lead">Demonstrating TouchSpin compatibility with Bootstrap 5</p>
    <div class="mt-4">
      <a href="index.html" class="btn btn-outline-light">‚Üê Back to Main Demo</a>
      <a href="bootstrap3.html" class="btn btn-light">Bootstrap 3 Demo</a>
      <a href="bootstrap4.html" class="btn btn-light">Bootstrap 4 Demo</a>
    </div>
  </div>

  <div class="version-info">
    <h3><i class="bi bi-star-fill text-warning"></i> Bootstrap 5 Features</h3>
    <p>This demo showcases Bootstrap TouchSpin working with Bootstrap 5.3.0, featuring:</p>
    <ul>
      <li>Simplified input group structure (no prepend/append wrapper divs)</li>
      <li>Direct <code>input-group-text</code> elements</li>
      <li>Bootstrap 5's CSS custom properties (CSS variables)</li>
      <li>Enhanced color system and utilities</li>
      <li>Modern spacing and typography</li>
      <li>Bootstrap Icons integration</li>
    </ul>
  </div>

  <div class="demo-section">
    <h2><i class="bi bi-play-circle"></i> Basic Examples</h2>

    <div class="demo-example">
      <div class="row">
        <div class="col-md-4">
          <label for="demo1" class="form-label">Simple TouchSpin:</label>
          <input id="demo1" type="text" value="42" name="demo1" class="form-control">
        </div>
        <div class="col-md-8">
          <h5><i class="bi bi-code-slash"></i> Code:</h5>
          <pre class="bg-dark text-light p-3 rounded"><code>$("input[name='demo1']").TouchSpin();</code></pre>
        </div>
      </div>
    </div>

    <div class="demo-example">
      <div class="row">
        <div class="col-md-4">
          <label for="demo2" class="form-label">With Prefix &amp; Postfix:</label>
          <input id="demo2" type="text" value="50" name="demo2" class="form-control">
        </div>
        <div class="col-md-8">
          <h5><i class="bi bi-code-slash"></i> Code:</h5>
          <pre class="bg-dark text-light p-3 rounded"><code>$("input[name='demo2']").TouchSpin({
  prefix: '$',
  postfix: '.00',
  min: 0,
  max: 1000
});</code></pre>
        </div>
      </div>
    </div>

    <!-- NEW: Callbacks example (currency formatting inside the input value) -->
    <div class="demo-example">
      <div class="row">
        <div class="col-md-4">
          <label for="demo2cb" class="form-label">Currency (callbacks):</label>
          <input id="demo2cb" type="text" value="1000" name="demo2cb" class="form-control">
          <div class="hint mt-2">
            Try typing: <code>$1,234abc</code> or <code> 1000.5 </code> then press Enter / blur / use arrows.
            Value will normalize and format to <code>$1,234.50</code>.
          </div>
        </div>
        <div class="col-md-8">
          <h5><i class="bi bi-code-slash"></i> Code (callbacks):</h5>
          <pre class="bg-dark text-light p-3 rounded"><code>const before = (raw) =&gt; (raw ?? '').replace(/[^\d\.\-]/g, '');
const after  = (numStr) =&gt; {
  const n = parseFloat(numStr);
  if (!isFinite(n)) return '';
  return new Intl.NumberFormat('en-US', {
    style: 'currency', currency: 'USD',
    minimumFractionDigits: 2, maximumFractionDigits: 2
  }).format(n);
};

$("input[name='demo2cb']").TouchSpin({
  min: 0, max: 100000, step: 0.5, decimals: 2,
  callback_before_calculation: before,
  callback_after_calculation:  after
});</code></pre>
        </div>
      </div>
    </div>

    <div class="demo-example">
      <div class="row">
        <div class="col-md-4">
          <label for="demo3" class="form-label">High Precision Decimals:</label>
          <input id="demo3" type="text" value="2.71828" name="demo3" class="form-control">
        </div>
        <div class="col-md-8">
          <h5><i class="bi bi-code-slash"></i> Code:</h5>
          <pre class="bg-dark text-light p-3 rounded"><code>$("input[name='demo3']").TouchSpin({
  min: 0,
  max: 10,
  step: 0.00001,
  decimals: 5
});</code></pre>
        </div>
      </div>
    </div>
  </div>

  <div class="demo-section">
    <h2><i class="bi bi-arrows-expand"></i> Bootstrap 5 Sizing</h2>

    <div class="demo-example">
      <div class="row">
        <div class="col-md-4">
          <label for="demo4" class="form-label">Small Size:</label>
          <input id="demo4" type="text" value="25" name="demo4" class="form-control form-control-sm">
        </div>
        <div class="col-md-8">
          <h5><i class="bi bi-code-slash"></i> Code:</h5>
          <pre class="bg-dark text-light p-3 rounded"><code>&lt;input class="form-control form-control-sm" ...&gt;
$("input[name='demo4']").TouchSpin();</code></pre>
        </div>
      </div>
    </div>

    <div class="demo-example">
      <div class="row">
        <div class="col-md-4">
          <label for="demo5" class="form-label">Large Size:</label>
          <input id="demo5" type="text" value="75" name="demo5" class="form-control form-control-lg">
        </div>
        <div class="col-md-8">
          <h5><i class="bi bi-code-slash"></i> Code:</h5>
          <pre class="bg-dark text-light p-3 rounded"><code>&lt;input class="form-control form-control-lg" ...&gt;
$("input[name='demo5']").TouchSpin();</code></pre>
        </div>
      </div>
    </div>
  </div>

  <div class="demo-section">
    <h2><i class="bi bi-arrow-up-down"></i> Vertical Buttons</h2>

    <div class="demo-example">
      <div class="row">
        <div class="col-md-4">
          <label for="demo6" class="form-label">Vertical with Bootstrap Icons:</label>
          <input id="demo6" type="text" value="10" name="demo6" class="form-control">
        </div>
        <div class="col-md-8">
          <h5><i class="bi bi-code-slash"></i> Code:</h5>
          <pre class="bg-dark text-light p-3 rounded"><code>$("input[name='demo6']").TouchSpin({
  verticalbuttons: true,
  verticalup: '&lt;i class="bi bi-chevron-up"&gt;&lt;/i&gt;',
  verticaldown: '&lt;i class="bi bi-chevron-down"&gt;&lt;/i&gt;'
});</code></pre>
        </div>
      </div>
    </div>
  </div>

  <div class="demo-section">
    <h2><i class="bi bi-ui-checks-grid"></i> Bootstrap 5 Input Groups</h2>

    <div class="demo-example">
      <div class="row">
        <div class="col-md-8">
          <label for="demo7" class="form-label">Modern Input Group (No wrapper divs):</label>
          <div class="input-group">
            <span class="input-group-text">
              <i class="bi bi-calculator"></i>
            </span>
            <input id="demo7" type="text" value="100" name="demo7" class="form-control">
            <button type="button" class="btn btn-success">
              <i class="bi bi-check-lg"></i> Apply
            </button>
            <button type="button" class="btn btn-outline-secondary dropdown-toggle" data-bs-toggle="dropdown">
              <i class="bi bi-three-dots-vertical"></i>
            </button>
            <ul class="dropdown-menu">
              <li><a class="dropdown-item" href="#"><i class="bi bi-gear"></i> Option 1</a></li>
              <li><a class="dropdown-item" href="#"><i class="bi bi-star"></i> Option 2</a></li>
              <li><hr class="dropdown-divider"></li>
              <li><a class="dropdown-item" href="#"><i class="bi bi-arrow-clockwise"></i> Reset</a></li>
            </ul>
          </div>
        </div>
        <div class="col-md-4">
          <h5><i class="bi bi-code-slash"></i> Code:</h5>
          <pre class="bg-dark text-light p-2 rounded"><code>&lt;div class="input-group"&gt;
  &lt;span class="input-group-text"&gt;
    &lt;i class="bi bi-calculator"&gt;&lt;/i&gt;
  &lt;/span&gt;
  &lt;input ... class="form-control"&gt;
  &lt;button class="btn btn-success"&gt;
    Apply
  &lt;/button&gt;
  ...
&lt;/div&gt;</code></pre>
        </div>
      </div>
    </div>
  </div>

  <div class="demo-section">
    <h2><i class="bi bi-palette"></i> Bootstrap 5 Color System</h2>

    <div class="demo-example">
      <div class="row">
        <div class="col-md-4">
          <label for="demo8" class="form-label">Modern Button Colors:</label>
          <input id="demo8" type="text" value="33" name="demo8" class="form-control">
        </div>
        <div class="col-md-8">
          <h5><i class="bi bi-code-slash"></i> Code:</h5>
          <pre class="bg-dark text-light p-3 rounded"><code>$("input[name='demo8']").TouchSpin({
  buttondown_class: "btn btn-outline-danger",
  buttonup_class: "btn btn-outline-success",
  buttondown_txt: '&lt;i class="bi bi-dash-lg"&gt;&lt;/i&gt;',
  buttonup_txt: '&lt;i class="bi bi-plus-lg"&gt;&lt;/i&gt;'
});</code></pre>
        </div>
      </div>
    </div>

    <div class="demo-example">
      <div class="row">
        <div class="col-md-4">
          <label for="demo9" class="form-label">Bootstrap 5 Color Variants:</label>
          <input id="demo9" type="text" value="67" name="demo9" class="form-control">
        </div>
        <div class="col-md-8">
          <h5><i class="bi bi-code-slash"></i> Code:</h5>
          <pre class="bg-dark text-light p-3 rounded"><code>$("input[name='demo9']").TouchSpin({
  buttondown_class: "btn btn-info",
  buttonup_class: "btn btn-warning",
  prefix: "Qty:",
  postfix: " items"
});</code></pre>
        </div>
      </div>
    </div>
  </div>

  <div class="demo-section">
    <h2><i class="bi bi-speedometer2"></i> Advanced Features</h2>

    <div class="demo-example">
      <div class="row">
        <div class="col-md-4">
          <label for="demo10" class="form-label">Large Input Group:</label>
          <div class="input-group input-group-lg">
            <span class="input-group-text">$</span>
            <input id="demo10" type="text" value="1000" name="demo10" class="form-control">
            <span class="input-group-text">.00</span>
          </div>
        </div>
        <div class="col-md-8">
          <h5><i class="bi bi-code-slash"></i> Code:</h5>
          <pre class="bg-dark text-light p-3 rounded"><code>&lt;div class="input-group input-group-lg"&gt;
  &lt;span class="input-group-text"&gt;$&lt;/span&gt;
  &lt;input ... class="form-control"&gt;
  &lt;span class="input-group-text"&gt;.00&lt;/span&gt;
&lt;/div&gt;</code></pre>
        </div>
      </div>
    </div>

    <div class="demo-example">
      <div class="row">
        <div class="col-md-4">
          <label for="demo11" class="form-label">With Floating Label:</label>
          <div class="form-floating">
            <input id="demo11" type="text" value="50" name="demo11" class="form-control" placeholder="Enter value">
            <label for="demo11">Floating Label</label>
          </div>
        </div>
        <div class="col-md-8">
          <h5><i class="bi bi-code-slash"></i> Code:</h5>
          <pre class="bg-dark text-light p-3 rounded"><code>&lt;div class="form-floating"&gt;
  &lt;input class="form-control" placeholder="Enter value"&gt;
  &lt;label&gt;Floating Label&lt;/label&gt;
&lt;/div&gt;

$("input[name='demo11']").TouchSpin({
  min: 0,
  max: 100,
  step: 5
});</code></pre>
        </div>
      </div>
    </div>

    <div class="demo-example">
      <div class="row">
        <div class="col-md-4">
          <label for="demo12" class="form-label">Performance Booster:</label>
          <input id="demo12" type="text" value="0" name="demo12" class="form-control">
        </div>
        <div class="col-md-8">
          <h5><i class="bi bi-code-slash"></i> Code:</h5>
          <pre class="bg-dark text-light p-3 rounded"><code>$("input[name='demo12']").TouchSpin({
  min: 0,
  max: 50000,
  step: 25,
  booster: true,
  boostat: 2,
  maxboostedstep: 2500,
  postfix: " GB"
});</code></pre>
        </div>
      </div>
    </div>
  </div>

  <div class="demo-section">
    <h2><i class="bi bi-card-checklist"></i> Form Validation</h2>

    <div class="demo-example">
      <div class="row">
        <div class="col-md-6">
          <label for="demo13" class="form-label">Bootstrap 5 Validation:</label>
          <input id="demo13" type="text" value="85" name="demo13" class="form-control is-valid">
          <div class="valid-feedback">
            <i class="bi bi-check-circle"></i> Perfect score!
          </div>
        </div>
        <div class="col-md-6">
          <label for="demo14" class="form-label">Invalid State:</label>
          <input id="demo14" type="text" value="15" name="demo14" class="form-control is-invalid">
          <div class="invalid-feedback">
            <i class="bi bi-exclamation-circle"></i> Value too low, minimum is 20.
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="demo-section">
    <h2><i class="bi bi-info-circle"></i> Bootstrap 5 Specific Build</h2>
    <div class="alert alert-primary d-flex align-items-center">
      <i class="bi bi-lightbulb me-2 fs-4"></i>
      <div>
        <h5 class="mb-1">Version-Specific Build</h5>
        <p class="mb-1">This demo uses the Bootstrap 5 specific build (<code>jquery.bootstrap-touchspin-bs5.js</code>) with optimized input group structure for best performance.</p>
      </div>
    </div>
  </div>

  <hr class="my-5">

  <footer class="text-center pb-4">
    <div class="btn-group" role="group">
      <a href="bootstrap3.html" class="btn btn-outline-primary">
        <i class="bi bi-arrow-left"></i> Bootstrap 3
      </a>
      <a href="bootstrap4.html" class="btn btn-outline-primary">
        <i class="bi bi-arrow-left"></i> Bootstrap 4
      </a>
      <a href="index.html" class="btn btn-primary">
        <i class="bi bi-house"></i> Main Demo
      </a>
    </div>
    <p class="text-muted mt-3">
      <i class="bi bi-heart-fill text-danger"></i> Bootstrap TouchSpin with Bootstrap 5.3.0
    </p>
  </footer>
</div>

<script>
  $(document).ready(function() {
    // Initialize all TouchSpins
    $("input[name='demo1']").TouchSpin();

    $("input[name='demo2']").TouchSpin({
      prefix: '$',
      postfix: '.00',
      min: 0,
      max: 1000
    });

    // NEW: Callbacks example (currency formatting inside the input value)
    (function() {
      const before = (raw) => (raw ?? '').replace(/[^\d\.\-]/g, ''); // strip $, commas, spaces, etc.
      const after  = (numStr) => {
        const n = parseFloat(numStr);
        if (!isFinite(n)) return '';
        return new Intl.NumberFormat('en-US', {
          style: 'currency', currency: 'USD',
          minimumFractionDigits: 2, maximumFractionDigits: 2
        }).format(n);
      };
      $("input[name='demo2cb']").TouchSpin({
        min: 0, max: 100000, step: 0.5, decimals: 2,
        callback_before_calculation: before,
        callback_after_calculation:  after
      });
    })();

    $("input[name='demo3']").TouchSpin({
      min: 0,
      max: 10,
      step: 0.00001,
      decimals: 5
    });

    $("input[name='demo4']").TouchSpin();

    $("input[name='demo5']").TouchSpin();

    $("input[name='demo6']").TouchSpin({
      verticalbuttons: true,
      verticalup: '<i class="bi bi-chevron-up"></i>',
      verticaldown: '<i class="bi bi-chevron-down"></i>'
    });

    $("input[name='demo7']").TouchSpin({
      prefix: "Value:",
      postfix: "units"
    });

    $("input[name='demo8']").TouchSpin({
      buttondown_class: "btn btn-outline-danger",
      buttonup_class: "btn btn-outline-success",
      buttondown_txt: '<i class="bi bi-dash-lg"></i>',
      buttonup_txt: '<i class="bi bi-plus-lg"></i>'
    });

    $("input[name='demo9']").TouchSpin({
      buttondown_class: "btn btn-info",
      buttonup_class: "btn btn-warning",
      prefix: "Qty:",
      postfix: " items"
    });

    $("input[name='demo10']").TouchSpin({
      min: 0,
      max: 100000,
      step: 100
    });

    $("input[name='demo11']").TouchSpin({
      min: 0,
      max: 100,
      step: 5
    });

    $("input[name='demo12']").TouchSpin({
      min: 0,
      max: 50000,
      step: 25,
      booster: true,
      boostat: 2,
      maxboostedstep: 2500,
      postfix: " GB"
    });

    $("input[name='demo13']").TouchSpin({
      min: 0,
      max: 100,
      step: 5
    });

    $("input[name='demo14']").TouchSpin({
      min: 20,
      max: 100,
      step: 5
    });

  });
</script>
</body>
</html>
