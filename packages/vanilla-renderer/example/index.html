<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>VanillaRenderer with Theme Editor</title>
  
  <!-- VanillaRenderer CSS -->
  <link rel="stylesheet" href="../src/themes/vanilla.css">
  
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, sans-serif;
      margin: 0;
      padding: 20px;
      background-color: #f8fafc;
      color: #333;
    }
    
    .container {
      display: grid;
      grid-template-columns: 1fr 400px;
      gap: 30px;
      max-width: 1400px;
      margin: 0 auto;
    }
    
    .examples-section {
      min-width: 0;
    }
    
    h1 {
      color: #111827;
      margin-bottom: 30px;
      grid-column: 1 / -1;
    }
    
    .example {
      background: white;
      padding: 30px;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      margin-bottom: 30px;
    }
    
    .example h3 {
      margin-top: 0;
      color: #374151;
    }
    
    .spinner {
      margin: 15px 0;
    }
    
    .spinner input {
      width: 200px;
    }
    
    /* Theme Editor Styles */
    .theme-editor {
      position: sticky;
      top: 20px;
      max-height: calc(100vh - 40px);
      overflow-y: auto;
      background: white;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      border: 1px solid #e5e7eb;
    }
    
    .theme-editor-header {
      padding: 20px 20px 15px;
      border-bottom: 1px solid #e5e7eb;
      position: sticky;
      top: 0;
      background: white;
      border-radius: 8px 8px 0 0;
      z-index: 10;
    }
    
    .theme-editor-header h2 {
      margin: 0 0 15px;
      color: #111827;
      font-size: 1.25rem;
    }
    
    .theme-editor-actions {
      display: flex;
      gap: 10px;
    }
    
    .theme-editor-actions button {
      padding: 8px 16px;
      border-radius: 6px;
      border: 1px solid #d1d5db;
      background: #f9fafb;
      color: #374151;
      cursor: pointer;
      font-size: 0.875rem;
      font-weight: 500;
      transition: all 0.15s ease;
    }
    
    .theme-editor-actions button:hover {
      background: #f3f4f6;
      border-color: #9ca3af;
    }
    
    .theme-editor-actions button:active {
      background: #e5e7eb;
    }
    
    #copy-theme {
      background: #3b82f6;
      border-color: #3b82f6;
      color: white;
    }
    
    #copy-theme:hover {
      background: #2563eb;
      border-color: #2563eb;
    }
    
    #copy-theme:active {
      background: #1d4ed8;
    }
    
    .theme-editor-sections {
      padding: 20px;
    }
    
    .theme-editor-sections details {
      margin-bottom: 20px;
      border: 1px solid #e5e7eb;
      border-radius: 6px;
      overflow: hidden;
    }
    
    .theme-editor-sections summary {
      padding: 12px 16px;
      background: #f9fafb;
      cursor: pointer;
      font-weight: 500;
      color: #374151;
      border-bottom: 1px solid #e5e7eb;
      user-select: none;
      position: relative;
    }
    
    .theme-editor-sections summary:hover {
      background: #f3f4f6;
    }
    
    .theme-editor-sections summary::marker {
      display: none;
    }
    
    .theme-editor-sections summary::before {
      content: 'â–¶';
      position: absolute;
      right: 16px;
      transition: transform 0.2s ease;
      font-size: 0.75rem;
    }
    
    .theme-editor-sections details[open] summary::before {
      transform: rotate(90deg);
    }
    
    .variable-group {
      padding: 16px;
    }
    
    .variable-group label {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 12px;
      font-size: 0.875rem;
    }
    
    .variable-group label:last-child {
      margin-bottom: 0;
    }
    
    .variable-group span {
      color: #4b5563;
      font-weight: 500;
    }
    
    .variable-group input[type="color"] {
      width: 60px;
      height: 32px;
      border: 1px solid #d1d5db;
      border-radius: 4px;
      cursor: pointer;
      padding: 2px;
    }
    
    .variable-group input[type="text"] {
      width: 120px;
      padding: 6px 10px;
      border: 1px solid #d1d5db;
      border-radius: 4px;
      font-size: 0.875rem;
      font-family: ui-monospace, SFMono-Regular, "SF Mono", Monaco, "Cascadia Code", "Roboto Mono", Consolas, "Courier New", monospace;
    }
    
    .variable-group input[type="text"]:focus {
      outline: none;
      border-color: #3b82f6;
      box-shadow: 0 0 0 2px rgb(59 130 246 / 0.2);
    }
    
    .copy-success {
      background: #10b981 !important;
      border-color: #10b981 !important;
    }
    
    @media (max-width: 1200px) {
      .container {
        grid-template-columns: 1fr;
        gap: 20px;
      }
      
      .theme-editor {
        position: relative;
        top: auto;
        max-height: none;
        order: -1;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>VanillaRenderer with Theme Editor</h1>
    
    <div class="examples-section">
      <div class="example">
        <h3>Basic Spinner</h3>
        <div class="spinner">
          <input type="number" id="basic" value="5" min="0" max="100" step="1">
        </div>
      </div>

      <div class="example">
        <h3>With Prefix & Postfix</h3>
        <div class="spinner">
          <input type="number" id="currency" value="25" min="0" max="1000" step="5">
        </div>
      </div>


      <div class="example">
        <h3>Focusable Buttons (Tabbable)</h3>
        <div class="spinner">
          <input type="number" id="tabbable" value="10" min="0" max="100" step="1">
        </div>
      </div>

      <div class="example">
        <h3>Vertical Buttons</h3>
        <div class="spinner">
          <input type="number" id="vertical" value="50" min="0" max="100" step="10">
        </div>
      </div>

      <div class="example">
        <h3>Vertical Buttons with Prefix & Postfix</h3>
        <div class="spinner">
          <input type="number" id="vertical-prefix" value="75" min="0" max="200" step="5">
        </div>
      </div>
    </div>
    
    <div class="theme-editor">
      <div class="theme-editor-header">
        <h2>Theme Customizer</h2>
        <div class="theme-editor-actions">
          <button id="reset-theme">Reset to Defaults</button>
          <button id="copy-theme">Copy CSS</button>
        </div>
      </div>
      
      <div class="theme-editor-sections">
        <!-- Wrapper Section -->
        <details open>
          <summary>Wrapper Styles</summary>
          <div class="variable-group">
            <label>
              <span>Background Color</span>
              <input type="color" data-var="--ts-wrapper-background-color">
            </label>
            <label>
              <span>Border Color</span>
              <input type="color" data-var="--ts-wrapper-border-color">
            </label>
            <label>
              <span>Border Width</span>
              <input type="text" data-var="--ts-wrapper-border-width">
            </label>
            <label>
              <span>Border Radius</span>
              <input type="text" data-var="--ts-wrapper-border-radius">
            </label>
            <label>
              <span>Box Shadow</span>
              <input type="text" data-var="--ts-wrapper-box-shadow">
            </label>
          </div>
        </details>
        
        <!-- Focus States Section -->
        <details open>
          <summary>Focus States</summary>
          <div class="variable-group">
            <label>
              <span>Focus Border Color</span>
              <input type="color" data-var="--ts-wrapper-focus-border-color">
            </label>
            <label>
              <span>Focus Box Shadow</span>
              <input type="text" data-var="--ts-wrapper-focus-box-shadow">
            </label>
          </div>
        </details>
        
        <!-- Disabled/Readonly Section -->
        <details>
          <summary>Disabled & Readonly States</summary>
          <div class="variable-group">
            <label>
              <span>Disabled Background</span>
              <input type="color" data-var="--ts-wrapper-disabled-background-color">
            </label>
            <label>
              <span>Disabled Opacity</span>
              <input type="text" data-var="--ts-wrapper-disabled-opacity">
            </label>
            <label>
              <span>Readonly Background</span>
              <input type="color" data-var="--ts-wrapper-readonly-background-color">
            </label>
          </div>
        </details>
        
        <!-- Input Section -->
        <details open>
          <summary>Input Styles</summary>
          <div class="variable-group">
            <label>
              <span>Text Color</span>
              <input type="color" data-var="--ts-input-text-color">
            </label>
            <label>
              <span>Placeholder Color</span>
              <input type="color" data-var="--ts-input-placeholder-color">
            </label>
            <label>
              <span>Font Size</span>
              <input type="text" data-var="--ts-input-font-size">
            </label>
            <label>
              <span>Padding</span>
              <input type="text" data-var="--ts-input-padding">
            </label>
          </div>
        </details>
        
        <!-- Button Section -->
        <details open>
          <summary>Button Styles</summary>
          <div class="variable-group">
            <label>
              <span>Background Color</span>
              <input type="color" data-var="--ts-button-background-color">
            </label>
            <label>
              <span>Hover Background</span>
              <input type="color" data-var="--ts-button-background-color-hover">
            </label>
            <label>
              <span>Active Background (on click)</span>
              <input type="color" data-var="--ts-button-background-color-active">
            </label>
            <label>
              <span>Text Color</span>
              <input type="color" data-var="--ts-button-text-color">
            </label>
            <label>
              <span>Font Weight</span>
              <input type="text" data-var="--ts-button-font-weight">
            </label>
            <label>
              <span>Padding</span>
              <input type="text" data-var="--ts-button-padding">
            </label>
            <label>
              <span>Disabled Opacity</span>
              <input type="text" data-var="--ts-button-disabled-opacity">
            </label>
            <label>
              <span>Down Button Border Radius</span>
              <input type="text" data-var="--ts-button-down-border-radius">
            </label>
            <label>
              <span>Up Button Border Radius</span>
              <input type="text" data-var="--ts-button-up-border-radius">
            </label>
          </div>
        </details>
        
        <!-- Addon Section -->
        <details>
          <summary>Addon (Prefix/Postfix) Styles</summary>
          <div class="variable-group">
            <label>
              <span>Background Color</span>
              <input type="color" data-var="--ts-addon-background-color">
            </label>
            <label>
              <span>Text Color</span>
              <input type="color" data-var="--ts-addon-text-color">
            </label>
            <label>
              <span>Padding</span>
              <input type="text" data-var="--ts-addon-padding">
            </label>
          </div>
        </details>
        
        <!-- Vertical Button Section -->
        <details>
          <summary>Vertical Button Styles</summary>
          <div class="variable-group">
            <label>
              <span>Background Color</span>
              <input type="color" data-var="--ts-vertical-button-background-color">
            </label>
            <label>
              <span>Hover Background</span>
              <input type="color" data-var="--ts-vertical-button-background-color-hover">
            </label>
            <label>
              <span>Text Color</span>
              <input type="color" data-var="--ts-vertical-button-text-color">
            </label>
            <label>
              <span>Border Color</span>
              <input type="color" data-var="--ts-vertical-button-border-color">
            </label>
            <label>
              <span>Border Width</span>
              <input type="text" data-var="--ts-vertical-button-border-width">
            </label>
            <label>
              <span>Padding</span>
              <input type="text" data-var="--ts-vertical-button-padding">
            </label>
            <label>
              <span>Font Size</span>
              <input type="text" data-var="--ts-vertical-button-font-size">
            </label>
            <label>
              <span>Font Weight</span>
              <input type="text" data-var="--ts-vertical-button-font-weight">
            </label>
            <label>
              <span>Disabled Opacity</span>
              <input type="text" data-var="--ts-vertical-button-disabled-opacity">
            </label>
            <label>
              <span>Up Button Border Radius</span>
              <input type="text" data-var="--ts-vertical-button-up-border-radius">
            </label>
            <label>
              <span>Down Button Border Radius</span>
              <input type="text" data-var="--ts-vertical-button-down-border-radius">
            </label>
          </div>
        </details>
      </div>
    </div>
  </div>

  <script type="module">
    import { TouchSpin } from '../../core/src/index.js';
    import { VanillaRenderer } from '../src/index.js';

    // Theme Editor Class
    class ThemeEditor {
      constructor() {
        this.storageKey = 'touchspin-vanilla-variables';
        this.defaultValues = {};
        this.init();
      }
      
      init() {
        this.captureDefaults();
        this.bindEvents();
        this.loadSavedVariables();
        this.updateInputs();
      }
      
      captureDefaults() {
        // Capture all default values from CSS
        const inputs = document.querySelectorAll('[data-var]');
        inputs.forEach(input => {
          const varName = input.dataset.var;
          const computedValue = getComputedStyle(document.documentElement)
            .getPropertyValue(varName)
            .trim();
          this.defaultValues[varName] = computedValue;
        });
      }
      
      bindEvents() {
        // Bind input changes
        document.querySelectorAll('[data-var]').forEach(input => {
          input.addEventListener('input', (e) => {
            this.updateVariable(e.target.dataset.var, e.target.value);
          });
          
          input.addEventListener('change', (e) => {
            this.saveVariables();
          });
        });
        
        // Bind reset button
        document.getElementById('reset-theme').addEventListener('click', () => {
          this.resetToDefaults();
        });
        
        // Bind copy button
        document.getElementById('copy-theme').addEventListener('click', () => {
          this.copyToClipboard();
        });
      }
      
      loadSavedVariables() {
        const saved = localStorage.getItem(this.storageKey);
        if (saved) {
          const variables = JSON.parse(saved);
          this.applyVariables(variables);
        }
      }
      
      saveVariables() {
        const variables = this.getCurrentVariables();
        localStorage.setItem(this.storageKey, JSON.stringify(variables));
      }
      
      getCurrentVariables() {
        const variables = {};
        document.querySelectorAll('[data-var]').forEach(input => {
          variables[input.dataset.var] = input.value;
        });
        return variables;
      }
      
      applyVariables(variables) {
        Object.entries(variables).forEach(([key, value]) => {
          document.documentElement.style.setProperty(key, value);
        });
      }
      
      updateVariable(varName, value) {
        document.documentElement.style.setProperty(varName, value);
      }
      
      resetToDefaults() {
        this.applyVariables(this.defaultValues);
        this.updateInputs();
        localStorage.removeItem(this.storageKey);
      }
      
      updateInputs() {
        document.querySelectorAll('[data-var]').forEach(input => {
          const varName = input.dataset.var;
          const value = getComputedStyle(document.documentElement)
            .getPropertyValue(varName)
            .trim();
          input.value = value;
        });
      }
      
      async copyToClipboard() {
        const variables = this.getCurrentVariables();
        const css = this.generateCSS(variables);
        
        try {
          await navigator.clipboard.writeText(css);
          this.showCopySuccess();
        } catch (err) {
          console.error('Failed to copy to clipboard:', err);
        }
      }
      
      generateCSS(variables) {
        let css = ':root {\n';
        Object.entries(variables).forEach(([key, value]) => {
          css += `  ${key}: ${value};\n`;
        });
        css += '}';
        return css;
      }
      
      showCopySuccess() {
        const button = document.getElementById('copy-theme');
        const originalText = button.textContent;
        button.textContent = 'Copied!';
        button.classList.add('copy-success');
        
        setTimeout(() => {
          button.textContent = originalText;
          button.classList.remove('copy-success');
        }, 2000);
      }
    }

    // Initialize TouchSpin instances
    TouchSpin(document.getElementById('basic'), {
      renderer: VanillaRenderer
    });

    TouchSpin(document.getElementById('currency'), {
      renderer: VanillaRenderer,
      prefix: '$',
      postfix: 'USD'
    });

    TouchSpin(document.getElementById('tabbable'), {
      renderer: VanillaRenderer,
      focusablebuttons: true
    });

    TouchSpin(document.getElementById('vertical'), {
      renderer: VanillaRenderer,
      verticalbuttons: true
    });

    TouchSpin(document.getElementById('vertical-prefix'), {
      renderer: VanillaRenderer,
      verticalbuttons: true,
      prefix: '$',
      postfix: '/mo'
    });

    // Initialize theme editor
    new ThemeEditor();

    console.log('âœ… All TouchSpin instances and Theme Editor initialized successfully');
  </script>
</body>
</html>