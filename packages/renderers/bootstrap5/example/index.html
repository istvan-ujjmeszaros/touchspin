<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TouchSpin Bootstrap 5 Demo</title>

  <!-- Bootstrap 5 CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">

  <!-- TouchSpin CSS -->
  <link rel="stylesheet" href="../../../../src/jquery.bootstrap-touchspin.css">

  <style>
    body {
      font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
      margin: 0;
      padding: 20px;
      background-color: #f5f5f5;
      color: #333;
    }

    .main-container {
      display: grid;
      grid-template-columns: 1fr 400px;
      gap: 30px;
      max-width: 1400px;
      margin: 0 auto;
    }

    .examples-section {
      min-width: 0;
    }

    h1 {
      color: #333;
      margin-bottom: 30px;
      grid-column: 1 / -1;
    }

    .example {
      background: white;
      padding: 30px;
      border-radius: 6px;
      border: 1px solid #ddd;
      margin-bottom: 30px;
    }

    .example h3 {
      margin-top: 0;
      color: #333;
    }

    .spinner {
      margin: 15px 0;
    }

    .controls-panel {
      background: white;
      padding: 30px;
      border-radius: 6px;
      border: 1px solid #ddd;
      position: sticky;
      top: 20px;
      height: fit-content;
    }

    .controls-panel h3 {
      margin-top: 0;
      color: #333;
    }

    .control-group {
      margin-bottom: 20px;
    }

    .control-group label {
      display: block;
      font-weight: 600;
      margin-bottom: 8px;
      color: #555;
    }

    .control-group input[type="text"],
    .control-group input[type="number"],
    .control-group select {
      width: 100%;
      padding: 8px 12px;
      border: 1px solid #ccc;
      border-radius: 4px;
      font-size: 14px;
      background-color: #fff;
    }

    .control-group input[type="checkbox"] {
      margin-right: 8px;
    }

    .checkbox-label {
      display: flex !important;
      align-items: center;
      font-weight: normal !important;
      margin-bottom: 0 !important;
      cursor: pointer;
    }

    .btn-apply {
      background-color: #007bff;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
      margin-top: 10px;
    }

    .btn-apply:hover {
      background-color: #0056b3;
    }

    .generated-code {
      background-color: #f8f9fa;
      border: 1px solid #e9ecef;
      border-radius: 4px;
      padding: 15px;
      margin-top: 20px;
      font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
      font-size: 13px;
      overflow-x: auto;
      white-space: pre-wrap;
      word-wrap: break-word;
    }

    .generated-code h4 {
      margin-top: 0;
      margin-bottom: 15px;
      color: #333;
      font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
    }

    /* Bootstrap 5 TouchSpin specific styles */
    .bootstrap-touchspin .input-group-btn {
      position: relative;
    }

    .bootstrap-touchspin .input-group-btn:last-child > .btn {
      margin-left: -1px;
    }

    .bootstrap-touchspin .input-group-btn:first-child > .btn {
      margin-right: -1px;
    }

    /* Vertical button styles for Bootstrap 4 */
    .bootstrap-touchspin-vertical-button-wrapper {
      display: flex;
      flex-direction: column;
      width: auto;
    }

    .bootstrap-touchspin-vertical-button-wrapper .btn {
      border-radius: 0;
      margin: 0;
      height: 20px;
      line-height: 1;
      font-size: 12px;
      padding: 2px 8px;
    }

    .bootstrap-touchspin-vertical-button-wrapper .btn:first-child {
      border-top-left-radius: 0.25rem;
      border-top-right-radius: 0.25rem;
      border-bottom: 0;
    }

    .bootstrap-touchspin-vertical-button-wrapper .btn:last-child {
      border-bottom-left-radius: 0.25rem;
      border-bottom-right-radius: 0.25rem;
      border-top: 0;
    }
  </style>
</head>
<body>
  <div class="main-container">
    <h1>TouchSpin Bootstrap 5 Demo</h1>

    <div class="examples-section">
      <!-- Basic Example -->
      <div class="example">
        <h3>Basic Usage</h3>
        <p>Simple number input with TouchSpin controls.</p>
        <div class="spinner">
          <input type="number" class="form-control" value="50" min="0" max="100" step="1" data-testid="basic-spinner" id="basic-spinner">
        </div>
      </div>

      <!-- Currency Example -->
      <div class="example">
        <h3>Currency Input</h3>
        <p>TouchSpin with prefix and postfix for currency display.</p>
        <div class="spinner">
          <input type="number" class="form-control" value="25.50" min="0" max="1000" step="0.50" data-testid="currency-spinner" id="currency-spinner">
        </div>
      </div>

      <!-- Vertical Buttons Example -->
      <div class="example">
        <h3>Vertical Buttons</h3>
        <p>TouchSpin with vertical button layout.</p>
        <div class="spinner">
          <input type="number" class="form-control" value="10" min="0" max="100" step="1" data-testid="vertical-spinner" id="vertical-spinner">
        </div>
      </div>

      <!-- Custom Range Example -->
      <div class="example">
        <h3>Custom Range</h3>
        <p>TouchSpin with custom min/max values and step size.</p>
        <div class="spinner">
          <input type="number" class="form-control" value="500" min="100" max="1000" step="50" data-testid="range-spinner" id="range-spinner">
        </div>
      </div>

      <!-- Small Size Example -->
      <div class="example">
        <h3>Small Size Input</h3>
        <p>TouchSpin with Bootstrap small input size.</p>
        <div class="spinner">
          <input type="number" class="form-control form-control-sm" value="5" min="0" max="10" step="1" data-testid="small-spinner" id="small-spinner">
        </div>
      </div>

      <!-- Large Size Example -->
      <div class="example">
        <h3>Large Size Input</h3>
        <p>TouchSpin with Bootstrap large input size.</p>
        <div class="spinner">
          <input type="number" class="form-control form-control-lg" value="75" min="0" max="100" step="5" data-testid="large-spinner" id="large-spinner">
        </div>
      </div>
    </div>

    <div class="controls-panel">
      <h3>Live Controls</h3>
      <p>Modify the basic spinner in real-time:</p>

      <div class="control-group">
        <label for="prefix-input">Prefix:</label>
        <input type="text" id="prefix-input" placeholder="e.g., $">
      </div>

      <div class="control-group">
        <label for="postfix-input">Postfix:</label>
        <input type="text" id="postfix-input" placeholder="e.g., USD">
      </div>

      <div class="control-group">
        <label for="min-input">Min Value:</label>
        <input type="number" id="min-input" value="0">
      </div>

      <div class="control-group">
        <label for="max-input">Max Value:</label>
        <input type="number" id="max-input" value="100">
      </div>

      <div class="control-group">
        <label for="step-input">Step Size:</label>
        <input type="number" id="step-input" value="1" min="0.01" step="0.01">
      </div>

      <div class="control-group">
        <label for="decimals-input">Decimal Places:</label>
        <input type="number" id="decimals-input" value="0" min="0" max="10" step="1">
      </div>

      <div class="control-group">
        <label class="checkbox-label">
          <input type="checkbox" id="vertical-checkbox">
          Vertical Buttons
        </label>
      </div>

      <div class="control-group">
        <label class="checkbox-label">
          <input type="checkbox" id="mouse-wheel-checkbox" checked>
          Mouse Wheel
        </label>
      </div>

      <div class="control-group">
        <label class="checkbox-label">
          <input type="checkbox" id="focusable-checkbox">
          Focusable Buttons
        </label>
      </div>

      <div class="control-group">
        <label for="button-up-text">Up Button Text:</label>
        <input type="text" id="button-up-text" value="+">
      </div>

      <div class="control-group">
        <label for="button-down-text">Down Button Text:</label>
        <input type="text" id="button-down-text" value="−">
      </div>

      <button class="btn-apply" onclick="applySettings()">Apply Settings</button>

      <div class="generated-code">
        <h4>Generated Code:</h4>
        <div id="generated-code-content">
          <!-- Will be populated by JavaScript -->
        </div>
      </div>
    </div>
  </div>

  <script type="module">
    import { TouchSpin } from '../../../core/src/index.js';
    import Bootstrap5Renderer from '../src/Bootstrap5Renderer.js';

    console.log('✅ TouchSpin Bootstrap 5 Demo initialized');

    // Initialize all examples
    const basicSpinner = TouchSpin(document.getElementById('basic-spinner'), {
      renderer: Bootstrap5Renderer
    });

    const currencySpinner = TouchSpin(document.getElementById('currency-spinner'), {
      renderer: Bootstrap5Renderer,
      prefix: '$',
      postfix: 'USD',
      decimals: 2
    });

    const verticalSpinner = TouchSpin(document.getElementById('vertical-spinner'), {
      renderer: Bootstrap5Renderer,
      verticalbuttons: true
    });

    const rangeSpinner = TouchSpin(document.getElementById('range-spinner'), {
      renderer: Bootstrap5Renderer,
      prefix: '#'
    });

    const smallSpinner = TouchSpin(document.getElementById('small-spinner'), {
      renderer: Bootstrap5Renderer,
      prefix: 'x',
      postfix: 'items'
    });

    const largeSpinner = TouchSpin(document.getElementById('large-spinner'), {
      renderer: Bootstrap5Renderer,
      postfix: '%'
    });

    console.log('Basic spinner instance:', {
      upOnce: basicSpinner.upOnce || '',
      downOnce: basicSpinner.downOnce || '',
      startUpSpin: basicSpinner.startUpSpin || '',
      startDownSpin: basicSpinner.startDownSpin || '',
      stopSpin: basicSpinner.stopSpin || ''
    });

    // Store basic spinner instance for controls
    window.basicSpinnerInstance = basicSpinner;

    // Initialize controls
    updateGeneratedCode();

    // Apply settings function
    window.applySettings = function() {
      const prefix = document.getElementById('prefix-input').value;
      const postfix = document.getElementById('postfix-input').value;
      const min = parseInt(document.getElementById('min-input').value) || 0;
      const max = parseInt(document.getElementById('max-input').value) || 100;
      const step = parseFloat(document.getElementById('step-input').value) || 1;
      const decimals = parseInt(document.getElementById('decimals-input').value) || 0;
      const verticalbuttons = document.getElementById('vertical-checkbox').checked;
      const mousewheel = document.getElementById('mouse-wheel-checkbox').checked;
      const focusablebuttons = document.getElementById('focusable-checkbox').checked;
      const buttonup_txt = document.getElementById('button-up-text').value || '+';
      const buttondown_txt = document.getElementById('button-down-text').value || '−';

      // Update settings
      basicSpinner.updateSettings({
        prefix,
        postfix,
        min,
        max,
        step,
        decimals,
        verticalbuttons,
        mousewheel,
        focusablebuttons,
        buttonup_txt,
        buttondown_txt
      });

      updateGeneratedCode();
    };

    function updateGeneratedCode() {
      const prefix = document.getElementById('prefix-input').value;
      const postfix = document.getElementById('postfix-input').value;
      const min = document.getElementById('min-input').value;
      const max = document.getElementById('max-input').value;
      const step = document.getElementById('step-input').value;
      const decimals = document.getElementById('decimals-input').value;
      const verticalbuttons = document.getElementById('vertical-checkbox').checked;
      const mousewheel = document.getElementById('mouse-wheel-checkbox').checked;
      const focusablebuttons = document.getElementById('focusable-checkbox').checked;
      const buttonup_txt = document.getElementById('button-up-text').value;
      const buttondown_txt = document.getElementById('button-down-text').value;

      let htmlCode = `<input type="number" class="form-control" value="50"`;
      if (min) htmlCode += ` min="${min}"`;
      if (max) htmlCode += ` max="${max}"`;
      if (step) htmlCode += ` step="${step}"`;
      htmlCode += ` data-testid="my-spinner">`;

      let jsCode = `import { TouchSpin } from '@touchspin/core';\nimport Bootstrap5Renderer from '@touchspin/bootstrap5';\n\nconst spinner = TouchSpin(document.getElementById('my-spinner'), {\n  renderer: Bootstrap5Renderer`;

      const options = [];
      if (prefix) options.push(`prefix: '${prefix}'`);
      if (postfix) options.push(`postfix: '${postfix}'`);
      if (decimals && decimals !== '0') options.push(`decimals: ${decimals}`);
      if (verticalbuttons) options.push(`verticalbuttons: true`);
      if (!mousewheel) options.push(`mousewheel: false`);
      if (focusablebuttons) options.push(`focusablebuttons: true`);
      if (buttonup_txt && buttonup_txt !== '+') options.push(`buttonup_txt: '${buttonup_txt}'`);
      if (buttondown_txt && buttondown_txt !== '−') options.push(`buttondown_txt: '${buttondown_txt}'`);

      if (options.length > 0) {
        jsCode += ',\n  ' + options.join(',\n  ');
      }
      jsCode += '\n});';

      document.getElementById('generated-code-content').textContent =
        'HTML:\n' + htmlCode + '\n\nJavaScript:\n' + jsCode;
    }

    // Update code when controls change
    ['prefix-input', 'postfix-input', 'min-input', 'max-input', 'step-input',
     'decimals-input', 'vertical-checkbox', 'mouse-wheel-checkbox',
     'focusable-checkbox', 'button-up-text', 'button-down-text'].forEach(id => {
      document.getElementById(id).addEventListener('input', updateGeneratedCode);
      document.getElementById(id).addEventListener('change', updateGeneratedCode);
    });
  </script>
</body>
</html>
