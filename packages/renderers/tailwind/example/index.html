<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TouchSpin Tailwind Demo</title>

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- TouchSpin CSS -->
  <link rel="stylesheet" href="../../../../src/jquery.bootstrap-touchspin.css">

  <style>
    body {
      font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
      margin: 0;
      padding: 20px;
      background-color: #f5f5f5;
      color: #333;
    }

    .main-container {
      display: grid;
      grid-template-columns: 1fr 400px;
      gap: 30px;
      max-width: 1400px;
      margin: 0 auto;
    }

    .examples-section {
      min-width: 0;
    }

    h1 {
      color: #333;
      margin-bottom: 30px;
      grid-column: 1 / -1;
    }

    .example {
      background: white;
      padding: 30px;
      border-radius: 6px;
      border: 1px solid #ddd;
      margin-bottom: 30px;
    }

    .example h3 {
      margin-top: 0;
      color: #333;
    }

    .spinner {
      margin: 15px 0;
    }

    .code-example {
      background: #f5f5f5;
      border: 1px solid #ccc;
      border-radius: 4px;
      padding: 15px;
      margin: 15px 0;
      font-family: Menlo, Monaco, Consolas, "Courier New", monospace;
      font-size: 13px;
      overflow-x: auto;
    }

    /* Control Panel Styles */
    .control-panel {
      position: sticky;
      top: 20px;
      max-height: calc(100vh - 40px);
      overflow-y: auto;
      background: white;
      border-radius: 6px;
      border: 1px solid #ddd;
    }

    .control-panel-header {
      padding: 20px 20px 15px;
      border-bottom: 1px solid #ddd;
      position: sticky;
      top: 0;
      background: white;
      border-radius: 6px 6px 0 0;
      z-index: 10;
    }

    .control-panel-header h2 {
      margin: 0 0 10px;
      color: #333;
      font-size: 18px;
    }

    .control-sections {
      padding: 20px;
    }

    .control-sections .control-panel-section {
      margin-bottom: 15px;
    }

    .control-group {
      padding: 15px;
    }

    .control-group .form-group {
      margin-bottom: 15px;
    }

    .control-group .form-group:last-child {
      margin-bottom: 0;
    }

    .control-group label {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 0;
      font-weight: 500;
    }

    .control-group .form-control {
      width: 120px;
      margin-left: 10px;
      padding: 6px 10px;
      border: 1px solid #ced4da;
      border-radius: 4px;
      font-size: 13px;
    }

    .control-group .checkbox {
      margin-bottom: 10px;
    }

    .control-group .checkbox label {
      display: flex;
      align-items: center;
      justify-content: flex-start;
      font-weight: normal;
      cursor: pointer;
      margin-bottom: 0;
    }

    .control-group .checkbox input[type="checkbox"] {
      margin-right: 8px;
    }

    .event-log {
      background: #f8f9fa;
      border: 1px solid #dee2e6;
      border-radius: 4px;
      padding: 10px;
      height: 120px;
      overflow-y: auto;
      font-family: monospace;
      font-size: 12px;
    }

    .event-entry {
      margin: 2px 0;
      color: #495057;
    }

    .event-entry.event-touchspin { color: #007bff; }
    .event-entry.event-method { color: #28a745; }
    .event-entry.event-error { color: #dc3545; }
    .event-entry.event-info { color: #6c757d; }

    .btn {
      padding: 6px 12px;
      margin: 2px;
      border: 1px solid #ced4da;
      border-radius: 4px;
      background: #f8f9fa;
      color: #495057;
      cursor: pointer;
      font-size: 12px;
    }

    .btn:hover {
      background: #e2e6ea;
    }

    .btn-danger {
      background: #dc3545;
      color: white;
      border-color: #dc3545;
    }

    .btn-danger:hover {
      background: #c82333;
    }

    /* Tailwind TouchSpin specific styles */
    .bootstrap-touchspin .input-group-btn {
      position: relative;
    }

    .bootstrap-touchspin .input-group-btn:last-child > .btn {
      margin-left: -1px;
    }

    .bootstrap-touchspin .input-group-btn:first-child > .btn {
      margin-right: -1px;
    }

    /* Vertical button styles for Bootstrap 4 */
    .bootstrap-touchspin-vertical-button-wrapper {
      display: flex;
      flex-direction: column;
      width: auto;
    }

    .bootstrap-touchspin-vertical-button-wrapper .btn {
      border-radius: 0;
      margin: 0;
      height: 20px;
      line-height: 1;
      font-size: 12px;
      padding: 2px 8px;
    }

    .bootstrap-touchspin-vertical-button-wrapper .btn:first-child {
      border-top-left-radius: 0.25rem;
      border-top-right-radius: 0.25rem;
      border-bottom: 0;
    }

    .bootstrap-touchspin-vertical-button-wrapper .btn:last-child {
      border-bottom-left-radius: 0.25rem;
      border-bottom-right-radius: 0.25rem;
      border-top: 0;
    }
  </style>
</head>
<body>
  <div class="main-container">
    <h1>TouchSpin Tailwind Demo</h1>

    <div class="examples-section">
      <!-- Basic Example -->
      <div class="example">
        <h3>Basic Usage</h3>
        <p>Simple number input with TouchSpin controls.</p>
        <div class="spinner">
          <input type="number" id="basic" min="0" max="100" value="50" step="1" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
        </div>
        <div class="code-example" id="basic-code-example">
          <!-- Will be populated by JavaScript -->
        </div>
      </div>

      <!-- Currency Example -->
      <div class="example">
        <h3>Currency Input</h3>
        <div class="spinner">
          <input type="number" id="currency" min="0" max="1000" value="25.50" step="0.50" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                 data-bts-prefix="$" data-bts-postfix=".00">
        </div>
        <div class="code-example">
          $('#currency').TouchSpin({<br>
          &nbsp;&nbsp;prefix: '$',<br>
          &nbsp;&nbsp;postfix: '.00',<br>
          &nbsp;&nbsp;step: 0.01<br>
          });
        </div>
      </div>

      <div class="example">
        <h3>Vertical Buttons</h3>
        <div class="spinner">
          <input type="number" id="vertical" min="0" max="100" value="75" step="5" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                 data-bts-vertical-buttons="true">
        </div>
        <div class="code-example">
          $('#vertical').TouchSpin({<br>
          &nbsp;&nbsp;verticalbuttons: true<br>
          });
        </div>
      </div>

      <div class="example">
        <h3>Custom Button Text</h3>
        <div class="spinner">
          <input type="number" id="custom-text" min="1" max="10" value="5" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                 data-bts-button-up-txt="▲" data-bts-button-down-txt="▼">
        </div>
        <div class="code-example">
          $('#custom-text').TouchSpin({<br>
          &nbsp;&nbsp;buttonup_txt: '▲',<br>
          &nbsp;&nbsp;buttondown_txt: '▼'<br>
          });
        </div>
      </div>

      <div class="example">
        <h3>Disabled State</h3>
        <div class="spinner">
          <input type="number" id="disabled" min="0" max="100" value="42" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" disabled>
        </div>
        <div class="code-example">
          $('#disabled').TouchSpin(); // Input disabled via HTML
        </div>
      </div>

      <div class="example" dir="rtl">
        <h3>RTL Support</h3>
        <div class="spinner">
          <input type="number" id="rtl" min="0" max="100" value="33" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                 data-bts-prefix="₪" data-bts-postfix=" ש״ח">
        </div>
        <div class="code-example">
          &lt;div dir="rtl"&gt;<br>
          &nbsp;&nbsp;$('#rtl').TouchSpin({<br>
          &nbsp;&nbsp;&nbsp;&nbsp;prefix: '₪',<br>
          &nbsp;&nbsp;&nbsp;&nbsp;postfix: ' ש״ח'<br>
          &nbsp;&nbsp;});<br>
          &lt;/div&gt;
        </div>
      </div>
    </div>

    <div class="control-panel">
      <div class="control-panel-header">
        <h2>Interactive Controls</h2>
        <p style="margin: 0; font-size: 13px; color: #777;">Interact with the basic spinner above</p>
      </div>

      <div class="control-sections">
        <!-- Property Controls -->
        <div class="control-panel-section bg-white border border-gray-200 rounded-lg mb-4">
          <div class="bg-gray-50 px-4 py-3 border-b border-gray-200 rounded-t-lg">
            <h4 class="font-semibold text-gray-800 m-0">Properties</h4>
          </div>
          <div class="control-group">
            <div class="form-group">
              <label>
                <span>Initial Value</span>
                <input type="number" id="control-value" value="50" class="form-control">
              </label>
            </div>
            <div class="form-group">
              <label>
                <span>Minimum</span>
                <input type="number" id="control-min" value="0" class="form-control">
              </label>
            </div>
            <div class="form-group">
              <label>
                <span>Maximum</span>
                <input type="number" id="control-max" value="100" class="form-control">
              </label>
            </div>
            <div class="form-group">
              <label>
                <span>Step</span>
                <input type="number" id="control-step" value="1" step="0.1" class="form-control">
              </label>
            </div>
            <div class="form-group">
              <label>
                <span>Prefix</span>
                <input type="text" id="control-prefix" placeholder="e.g. $" class="form-control">
              </label>
            </div>
            <div class="form-group">
              <label>
                <span>Postfix</span>
                <input type="text" id="control-postfix" placeholder="e.g. .00" class="form-control">
              </label>
            </div>
            <div class="form-group">
              <label>
                <span>Decimal Places</span>
                <input type="number" id="control-decimals" value="0" min="0" max="10" step="1" class="form-control">
              </label>
            </div>
            <div class="form-group">
              <label>
                <span>Button Up Text</span>
                <input type="text" id="control-buttonup-txt" value="+" class="form-control">
              </label>
            </div>
            <div class="form-group">
              <label>
                <span>Button Down Text</span>
                <input type="text" id="control-buttondown-txt" value="−" class="form-control">
              </label>
            </div>
          </div>
        </div>

        <!-- State Controls -->
        <div class="control-panel-section bg-white border border-gray-200 rounded-lg mb-4">
          <div class="bg-gray-50 px-4 py-3 border-b border-gray-200 rounded-t-lg">
            <h4 class="font-semibold text-gray-800 m-0">State Controls</h4>
          </div>
          <div class="control-group">
            <div class="checkbox">
              <label>
                <input type="checkbox" id="control-disabled"> Disabled
              </label>
            </div>
            <div class="checkbox">
              <label>
                <input type="checkbox" id="control-readonly"> Readonly
              </label>
            </div>
            <div class="checkbox">
              <label>
                <input type="checkbox" id="control-vertical"> Vertical Buttons
              </label>
            </div>
            <div class="checkbox">
              <label>
                <input type="checkbox" id="control-focusable"> Focusable Buttons
              </label>
            </div>
            <div class="checkbox">
              <label>
                <input type="checkbox" id="control-mousewheel" checked> Mouse Wheel
              </label>
            </div>
          </div>
        </div>

        <!-- Method Testing -->
        <div class="control-panel-section bg-white border border-gray-200 rounded-lg mb-4">
          <div class="bg-gray-50 px-4 py-3 border-b border-gray-200 rounded-t-lg">
            <h4 class="font-semibold text-gray-800 m-0">Method Testing</h4>
          </div>
          <div class="control-group">
            <button id="test-up-once" class="btn">upOnce()</button>
            <button id="test-down-once" class="btn">downOnce()</button>
            <br><br>
            <button id="test-start-up" class="btn">startUpSpin()</button>
            <button id="test-start-down" class="btn">startDownSpin()</button>
            <button id="test-stop-spin" class="btn">stopSpin()</button>
            <br><br>
            <button id="test-set-random" class="btn">setValue(random)</button>
            <button id="test-get-value" class="btn">getValue()</button>
          </div>
        </div>

        <!-- Event Monitor -->
        <div class="control-panel-section bg-white border border-gray-200 rounded-lg">
          <div class="bg-gray-50 px-4 py-3 border-b border-gray-200 rounded-t-lg">
            <h4 class="font-semibold text-gray-800 m-0">Event Monitor</h4>
          </div>
          <div class="control-group">
            <div class="event-log" id="event-log">
              <div class="event-entry">Waiting for events...</div>
            </div>
            <br>
            <button class="btn btn-danger" id="clear-log">Clear Log</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script type="module">
    // Import TouchSpin core and Tailwind renderer
    import { TouchSpin } from '../../../core/src/index.js';
    import TailwindRenderer from '../src/TailwindRenderer.js';

    // Initialize all TouchSpin instances
    const basicSpinner = TouchSpin(document.getElementById('basic'), { renderer: TailwindRenderer });
    TouchSpin(document.getElementById('currency'), { renderer: TailwindRenderer });
    TouchSpin(document.getElementById('vertical'), { renderer: TailwindRenderer });
    TouchSpin(document.getElementById('custom-text'), { renderer: TailwindRenderer });
    TouchSpin(document.getElementById('disabled'), { renderer: TailwindRenderer });
    TouchSpin(document.getElementById('rtl'), { renderer: TailwindRenderer });

    const basicCodeExample = document.getElementById('basic-code-example');

    // Generate code example from current control values
    function generateCodeExample() {
      const attributes = [];
      
      // Get values from controls
      const min = controls.min.value;
      const max = controls.max.value;
      const value = controls.value.value;
      const step = controls.step.value;
      
      // Always include basic HTML attributes
      attributes.push(`type="number"`);
      attributes.push(`class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"`);
      if (min) attributes.push(`min="${min}"`);
      if (max) attributes.push(`max="${max}"`);
      if (value) attributes.push(`value="${value}"`);
      if (step) attributes.push(`step="${step}"`);
      
      // Add TouchSpin data attributes for optional settings
      const prefix = controls.prefix.value;
      if (prefix) {
        attributes.push(`data-bts-prefix="${prefix}"`);
      }
      
      const postfix = controls.postfix.value;
      if (postfix) {
        attributes.push(`data-bts-postfix="${postfix}"`);
      }
      
      const verticalButtons = controls.vertical.checked;
      if (verticalButtons) {
        attributes.push(`data-bts-vertical-buttons="true"`);
      }
      
      // Add state attributes
      const input = document.getElementById('basic');
      if (input.disabled) {
        attributes.push(`disabled`);
      }
      
      if (input.readOnly) {
        attributes.push(`readonly`);
      }
      
      // Generate the HTML
      const attributeString = attributes.join(' ');
      let code = `&lt;input ${attributeString}&gt;\\n\\n`;
      
      // Add JavaScript initialization
      code += `&lt;script type="module"&gt;\\n`;
      code += `  import { TouchSpin } from '@touchspin/core';\\n`;
      code += `  import TailwindRenderer from '@touchspin/tailwind-renderer';\\n\\n`;
      code += `  TouchSpin(document.getElementById('myInput'), {\\n`;
      code += `    renderer: TailwindRenderer\\n`;
      code += `  });\\n`;
      code += `&lt;/script&gt;`;
      
      return code;
    }

    // Update the code example
    function updateCodeExample() {
      basicCodeExample.innerHTML = generateCodeExample().replace(/\\n/g, '<br>').replace(/  /g, '&nbsp;&nbsp;');
    }

    // Property controls
    const controls = {
      value: document.getElementById('control-value'),
      min: document.getElementById('control-min'),
      max: document.getElementById('control-max'),
      step: document.getElementById('control-step'),
      prefix: document.getElementById('control-prefix'),
      postfix: document.getElementById('control-postfix'),
      decimals: document.getElementById('control-decimals'),
      buttonupTxt: document.getElementById('control-buttonup-txt'),
      buttondownTxt: document.getElementById('control-buttondown-txt'),
      disabled: document.getElementById('control-disabled'),
      readonly: document.getElementById('control-readonly'),
      vertical: document.getElementById('control-vertical'),
      focusable: document.getElementById('control-focusable'),
      mousewheel: document.getElementById('control-mousewheel')
    };

    // Event log
    const eventLog = document.getElementById('event-log');
    let eventCount = 0;

    function addEventToLog(message, type = 'event-info') {
      eventCount++;
      const timestamp = new Date().toLocaleTimeString();
      const entry = document.createElement('div');
      entry.className = `event-entry ${type}`;
      entry.textContent = `[${timestamp}] ${message}`;
      
      // Remove first entry if log gets too long
      if (eventLog.children.length > 20) {
        eventLog.removeChild(eventLog.firstChild);
      }
      
      eventLog.appendChild(entry);
      eventLog.scrollTop = eventLog.scrollHeight;
    }

    // Initialize log
    addEventToLog('TouchSpin Tailwind Demo initialized', 'event-info');

    // Property control event listeners
    controls.value.addEventListener('input', (e) => {
      const newValue = parseFloat(e.target.value);
      if (!isNaN(newValue)) {
        basicSpinner.setValue(newValue);
        addEventToLog(`setValue(${newValue})`, 'event-method');
        updateCodeExample();
      }
    });

    controls.min.addEventListener('input', (e) => {
      basicSpinner.updateSettings({ min: parseFloat(e.target.value) });
      updateCodeExample();
    });

    controls.max.addEventListener('input', (e) => {
      basicSpinner.updateSettings({ max: parseFloat(e.target.value) });
      updateCodeExample();
    });

    controls.step.addEventListener('input', (e) => {
      basicSpinner.updateSettings({ step: parseFloat(e.target.value) });
      updateCodeExample();
    });

    controls.prefix.addEventListener('input', (e) => {
      basicSpinner.updateSettings({ prefix: e.target.value });
      updateCodeExample();
    });

    controls.postfix.addEventListener('input', (e) => {
      basicSpinner.updateSettings({ postfix: e.target.value });
      updateCodeExample();
    });

    controls.decimals.addEventListener('input', (e) => {
      basicSpinner.updateSettings({ decimals: parseInt(e.target.value) });
      updateCodeExample();
    });

    controls.buttonupTxt.addEventListener('input', (e) => {
      basicSpinner.updateSettings({ buttonup_txt: e.target.value });
      updateCodeExample();
    });

    controls.buttondownTxt.addEventListener('input', (e) => {
      basicSpinner.updateSettings({ buttondown_txt: e.target.value });
      updateCodeExample();
    });

    // State control event listeners
    controls.disabled.addEventListener('change', (e) => {
      const input = document.getElementById('basic');
      if (e.target.checked) {
        basicSpinner.disable();
        input.disabled = true;
        addEventToLog('disable()', 'event-method');
      } else {
        basicSpinner.enable();
        input.disabled = false;
        addEventToLog('enable()', 'event-method');
      }
      updateCodeExample();
    });

    controls.readonly.addEventListener('change', (e) => {
      const input = document.getElementById('basic');
      if (e.target.checked) {
        input.readOnly = true;
      } else {
        input.readOnly = false;
      }
      updateCodeExample();
    });

    controls.vertical.addEventListener('change', (e) => {
      basicSpinner.updateSettings({ verticalbuttons: e.target.checked });
      updateCodeExample();
    });

    controls.focusable.addEventListener('change', (e) => {
      basicSpinner.updateSettings({ focusablebuttons: e.target.checked });
      updateCodeExample();
    });

    controls.mousewheel.addEventListener('change', (e) => {
      basicSpinner.updateSettings({ mousewheel: e.target.checked });
      updateCodeExample();
    });

    // Method testing buttons
    document.getElementById('test-up-once').addEventListener('click', () => {
      basicSpinner.upOnce();
      addEventToLog('upOnce() called', 'event-method');
    });

    document.getElementById('test-down-once').addEventListener('click', () => {
      basicSpinner.downOnce();
      addEventToLog('downOnce() called', 'event-method');
    });

    document.getElementById('test-start-up').addEventListener('click', () => {
      basicSpinner.startUpSpin();
      addEventToLog('startUpSpin() called', 'event-method');
    });

    document.getElementById('test-start-down').addEventListener('click', () => {
      basicSpinner.startDownSpin();
      addEventToLog('startDownSpin() called', 'event-method');
    });

    document.getElementById('test-stop-spin').addEventListener('click', () => {
      basicSpinner.stopSpin();
      addEventToLog('stopSpin() called', 'event-method');
    });

    document.getElementById('test-set-random').addEventListener('click', () => {
      const randomValue = Math.floor(Math.random() * 100);
      basicSpinner.setValue(randomValue);
      addEventToLog(`setValue(${randomValue}) called`, 'event-method');
    });

    document.getElementById('test-get-value').addEventListener('click', () => {
      const currentValue = basicSpinner.getValue();
      addEventToLog(`getValue() returned: ${currentValue}`, 'event-method');
    });

    // Clear log button
    document.getElementById('clear-log').addEventListener('click', () => {
      eventLog.innerHTML = '<div class="event-entry">Event log cleared</div>';
      eventCount = 0;
    });

    // TouchSpin event listeners for the basic spinner
    const basicInput = document.getElementById('basic');
    basicInput.addEventListener('touchspin:start', (e) => {
      addEventToLog(`touchspin:start - Direction: ${e.detail.direction}`, 'event-touchspin');
    });

    basicInput.addEventListener('touchspin:startspin', (e) => {
      addEventToLog(`touchspin:startspin - Direction: ${e.detail.direction}`, 'event-touchspin');
    });

    basicInput.addEventListener('touchspin:stopspin', (e) => {
      addEventToLog('touchspin:stopspin', 'event-touchspin');
    });

    basicInput.addEventListener('touchspin:min', (e) => {
      addEventToLog(`touchspin:min - Value: ${e.detail.value}`, 'event-touchspin');
    });

    basicInput.addEventListener('touchspin:max', (e) => {
      addEventToLog(`touchspin:max - Value: ${e.detail.value}`, 'event-touchspin');
    });

    // Initialize controls with actual input values
    const inputElement = document.getElementById('basic');
    controls.value.value = inputElement.value || '';
    controls.min.value = inputElement.min || '';
    controls.max.value = inputElement.max || '';
    controls.step.value = inputElement.step || '';
    
    // Initialize the code example
    updateCodeExample();
  </script>
</body>
</html>
