<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TouchSpin Web Component Demo</title>

  <!-- VanillaRenderer CSS -->
  <link rel="stylesheet" href="../../vanilla-renderer/src/themes/vanilla.css">

  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, sans-serif;
      margin: 0;
      padding: 20px;
      background-color: #f8fafc;
      color: #333;
    }

    .container {
      display: grid;
      grid-template-columns: 1fr 400px;
      gap: 30px;
      max-width: 1400px;
      margin: 0 auto;
    }

    .examples-section {
      min-width: 0;
    }

    h1 {
      color: #111827;
      margin-bottom: 30px;
      grid-column: 1 / -1;
    }

    .example {
      background: white;
      padding: 30px;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      margin-bottom: 30px;
    }

    .example h3 {
      margin-top: 0;
      color: #374151;
    }

    .spinner {
      margin: 15px 0;
    }

    .code-example {
      background: #f8f9fa;
      border: 1px solid #e9ecef;
      border-radius: 4px;
      padding: 15px;
      margin: 15px 0;
      font-family: 'Courier New', monospace;
      font-size: 14px;
      overflow-x: auto;
    }

    /* Control Panel Styles */
    .control-panel {
      position: sticky;
      top: 20px;
      max-height: calc(100vh - 40px);
      overflow-y: auto;
      background: white;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      border: 1px solid #e5e7eb;
    }

    .control-panel-header {
      padding: 20px 20px 15px;
      border-bottom: 1px solid #e5e7eb;
      position: sticky;
      top: 0;
      background: white;
      border-radius: 8px 8px 0 0;
      z-index: 10;
    }

    .control-panel-header h2 {
      margin: 0 0 10px;
      color: #111827;
      font-size: 1.25rem;
    }

    .control-sections {
      padding: 20px;
    }

    .control-sections details {
      margin-bottom: 20px;
      border: 1px solid #e5e7eb;
      border-radius: 6px;
      overflow: hidden;
    }

    .control-sections summary {
      padding: 12px 16px;
      background: #f9fafb;
      cursor: pointer;
      font-weight: 500;
      color: #374151;
      border-bottom: 1px solid #e5e7eb;
      user-select: none;
    }

    .control-sections summary:hover {
      background: #f3f4f6;
    }

    .control-group {
      padding: 16px;
    }

    .control-group label {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 12px;
      font-size: 0.875rem;
    }

    .control-group label:last-child {
      margin-bottom: 0;
    }

    .control-group span {
      color: #4b5563;
      font-weight: 500;
    }

    .control-group input, .control-group select {
      width: 120px;
      padding: 6px 10px;
      border: 1px solid #d1d5db;
      border-radius: 4px;
      font-size: 0.875rem;
    }

    .control-group input:focus, .control-group select:focus {
      outline: none;
      border-color: #3b82f6;
      box-shadow: 0 0 0 2px rgb(59 130 246 / 0.2);
    }

    .control-group button {
      padding: 8px 16px;
      border-radius: 6px;
      border: 1px solid #d1d5db;
      background: #f9fafb;
      color: #374151;
      cursor: pointer;
      font-size: 0.875rem;
      font-weight: 500;
      transition: all 0.15s ease;
      margin: 2px;
    }

    .control-group button:hover {
      background: #f3f4f6;
      border-color: #9ca3af;
    }

    .control-group button:active {
      background: #e5e7eb;
    }

    /* Event Log Styles */
    .event-log {
      max-height: 200px;
      overflow-y: auto;
      border: 1px solid #e5e7eb;
      border-radius: 4px;
      background: #f8f9fa;
      padding: 10px;
      font-family: 'Courier New', monospace;
      font-size: 12px;
    }

    .event-entry {
      margin-bottom: 5px;
      padding: 2px 4px;
      border-radius: 2px;
    }

    .event-entry.change { background: #e3f2fd; }
    .event-entry.min { background: #fff3e0; }
    .event-entry.max { background: #fff3e0; }
    .event-entry.spin { background: #f3e5f5; }

    .clear-log {
      background: #dc3545 !important;
      color: white !important;
      border-color: #dc3545 !important;
    }

    .clear-log:hover {
      background: #c82333 !important;
      border-color: #c82333 !important;
    }

    @media (max-width: 1200px) {
      .container {
        grid-template-columns: 1fr;
        gap: 20px;
      }

      .control-panel {
        position: relative;
        top: auto;
        max-height: none;
        order: -1;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>TouchSpin Web Component Demo</h1>

    <div class="examples-section">
      <div class="example">
        <h3>Basic Usage</h3>
        <div class="spinner">
          <touchspin-element id="basic" min="0" max="100" value="50" step="1"></touchspin-element>
        </div>
        <div class="code-example">
          &lt;touchspin-element min="0" max="100" value="50" step="1"&gt;&lt;/touchspin-element&gt;
        </div>
      </div>

      <div class="example">
        <h3>With Prefix & Postfix</h3>
        <div class="spinner">
          <touchspin-element id="currency" min="0" max="1000" value="25" step="0.01" prefix="€" postfix=".00"></touchspin-element>
        </div>
        <div class="code-example">
          &lt;touchspin-element prefix="€" postfix=".00" step="0.01"&gt;&lt;/touchspin-element&gt;
        </div>
      </div>

      <div class="example">
        <h3>Vertical Buttons</h3>
        <div class="spinner">
          <touchspin-element id="vertical" min="0" max="100" value="75" step="5" vertical-buttons="true"></touchspin-element>
        </div>
        <div class="code-example">
          &lt;touchspin-element vertical-buttons="true"&gt;&lt;/touchspin-element&gt;
        </div>
      </div>

      <div class="example">
        <h3>Custom Button Text</h3>
        <div class="spinner">
          <touchspin-element id="custom-text" min="1" max="10" value="5" button-up-txt="▲" button-down-txt="▼"></touchspin-element>
        </div>
        <div class="code-example">
          &lt;touchspin-element button-up-txt="▲" button-down-txt="▼"&gt;&lt;/touchspin-element&gt;
        </div>
      </div>

      <div class="example">
        <h3>Disabled State</h3>
        <div class="spinner">
          <touchspin-element id="disabled" min="0" max="100" value="42" disabled></touchspin-element>
        </div>
        <div class="code-example">
          &lt;touchspin-element disabled&gt;&lt;/touchspin-element&gt;
        </div>
      </div>

      <div class="example" dir="rtl">
        <h3>RTL Support</h3>
        <div class="spinner">
          <touchspin-element id="rtl" min="0" max="100" value="33" prefix="₪" postfix=" ש״ח"></touchspin-element>
        </div>
        <div class="code-example">
          &lt;div dir="rtl"&gt;
            &lt;touchspin-element prefix="₪" postfix=" ש״ח"&gt;&lt;/touchspin-element&gt;
          &lt;/div&gt;
        </div>
      </div>
    </div>

    <div class="control-panel">
      <div class="control-panel-header">
        <h2>Interactive Controls</h2>
        <p style="margin: 0; font-size: 0.875rem; color: #6b7280;">Interact with the basic spinner above</p>
      </div>

      <div class="control-sections">
        <!-- Property Controls -->
        <details open>
          <summary>Properties</summary>
          <div class="control-group">
            <label>
              <span>Current Value</span>
              <input type="number" id="control-value" value="50">
            </label>
            <label>
              <span>Minimum</span>
              <input type="number" id="control-min" value="0">
            </label>
            <label>
              <span>Maximum</span>
              <input type="number" id="control-max" value="100">
            </label>
            <label>
              <span>Step</span>
              <input type="number" id="control-step" value="1" step="0.1">
            </label>
            <label>
              <span>Prefix</span>
              <input type="text" id="control-prefix" placeholder="e.g. $">
            </label>
            <label>
              <span>Postfix</span>
              <input type="text" id="control-postfix" placeholder="e.g. .00">
            </label>
          </div>
        </details>

        <!-- State Controls -->
        <details>
          <summary>State Controls</summary>
          <div class="control-group">
            <label>
              <span>Disabled</span>
              <input type="checkbox" id="control-disabled">
            </label>
            <label>
              <span>Readonly</span>
              <input type="checkbox" id="control-readonly">
            </label>
            <label>
              <span>Vertical Buttons</span>
              <input type="checkbox" id="control-vertical">
            </label>
          </div>
        </details>

        <!-- Method Testing -->
        <details open>
          <summary>Method Testing</summary>
          <div class="control-group">
            <button id="test-up-once">upOnce()</button>
            <button id="test-down-once">downOnce()</button>
            <br>
            <button id="test-start-up">startUpSpin()</button>
            <button id="test-start-down">startDownSpin()</button>
            <button id="test-stop-spin">stopSpin()</button>
            <br>
            <button id="test-set-random">setValue(random)</button>
            <button id="test-get-value">getValue()</button>
          </div>
        </details>

        <!-- Event Monitor -->
        <details open>
          <summary>Event Monitor</summary>
          <div class="control-group">
            <div class="event-log" id="event-log">
              <div class="event-entry">Waiting for events...</div>
            </div>
            <button class="clear-log" id="clear-log">Clear Log</button>
          </div>
        </details>
      </div>
    </div>
  </div>

  <script type="module">
    // Import TouchSpin Web Component
    import '../src/index.js';

    // Get the basic spinner for interactive controls
    const basicSpinner = document.getElementById('basic');

    // Property controls
    const controls = {
      value: document.getElementById('control-value'),
      min: document.getElementById('control-min'),
      max: document.getElementById('control-max'),
      step: document.getElementById('control-step'),
      prefix: document.getElementById('control-prefix'),
      postfix: document.getElementById('control-postfix'),
      disabled: document.getElementById('control-disabled'),
      readonly: document.getElementById('control-readonly'),
      vertical: document.getElementById('control-vertical')
    };

    // Event log
    const eventLog = document.getElementById('event-log');
    let eventCount = 0;

    function logEvent(eventName, detail) {
      eventCount++;
      const entry = document.createElement('div');
      entry.className = `event-entry ${eventName.replace('touchspin-', '')}`;
      entry.textContent = `${eventCount}. ${eventName}: ${JSON.stringify(detail)}`;
      eventLog.insertBefore(entry, eventLog.firstChild);
      
      // Keep only last 20 events
      while (eventLog.children.length > 20) {
        eventLog.removeChild(eventLog.lastChild);
      }
    }

    // Property change handlers
    controls.value.addEventListener('input', (e) => {
      basicSpinner.value = e.target.value;
    });

    controls.min.addEventListener('input', (e) => {
      basicSpinner.min = e.target.value;
    });

    controls.max.addEventListener('input', (e) => {
      basicSpinner.max = e.target.value;
    });

    controls.step.addEventListener('input', (e) => {
      basicSpinner.step = e.target.value;
    });

    controls.prefix.addEventListener('input', (e) => {
      basicSpinner.setAttribute('prefix', e.target.value);
    });

    controls.postfix.addEventListener('input', (e) => {
      basicSpinner.setAttribute('postfix', e.target.value);
    });

    controls.disabled.addEventListener('change', (e) => {
      basicSpinner.disabled = e.target.checked;
    });

    controls.readonly.addEventListener('change', (e) => {
      basicSpinner.readonly = e.target.checked;
    });

    controls.vertical.addEventListener('change', (e) => {
      basicSpinner.setAttribute('vertical-buttons', e.target.checked ? 'true' : 'false');
    });

    // Method testing
    document.getElementById('test-up-once').addEventListener('click', () => {
      basicSpinner.upOnce();
      logEvent('method-call', { method: 'upOnce()' });
    });

    document.getElementById('test-down-once').addEventListener('click', () => {
      basicSpinner.downOnce();
      logEvent('method-call', { method: 'downOnce()' });
    });

    document.getElementById('test-start-up').addEventListener('click', () => {
      basicSpinner.startUpSpin();
      logEvent('method-call', { method: 'startUpSpin()' });
    });

    document.getElementById('test-start-down').addEventListener('click', () => {
      basicSpinner.startDownSpin();
      logEvent('method-call', { method: 'startDownSpin()' });
    });

    document.getElementById('test-stop-spin').addEventListener('click', () => {
      basicSpinner.stopSpin();
      logEvent('method-call', { method: 'stopSpin()' });
    });

    document.getElementById('test-set-random').addEventListener('click', () => {
      const randomValue = Math.floor(Math.random() * 100);
      basicSpinner.value = randomValue;
      logEvent('method-call', { method: `setValue(${randomValue})` });
    });

    document.getElementById('test-get-value').addEventListener('click', () => {
      console.log('getValue button clicked');
      console.log('basicSpinner:', basicSpinner);
      const currentValue = basicSpinner.value;
      console.log('currentValue:', currentValue);
      logEvent('method-call', { method: 'getValue()', result: currentValue });
    });

    // Clear event log
    document.getElementById('clear-log').addEventListener('click', () => {
      eventLog.innerHTML = '<div class="event-entry">Event log cleared...</div>';
      eventCount = 0;
    });

    // Event listeners for all TouchSpin events
    const events = [
      'touchspin-change',
      'touchspin-min',
      'touchspin-max',
      'touchspin-start-spin',
      'touchspin-stop-spin',
      'touchspin-start-up',
      'touchspin-start-down',
      'touchspin-stop-up',
      'touchspin-stop-down'
    ];

    events.forEach(eventName => {
      basicSpinner.addEventListener(eventName, (e) => {
        logEvent(eventName, { value: e.detail.value });
      });
    });

    // Sync control values with spinner changes
    basicSpinner.addEventListener('touchspin-change', (e) => {
      controls.value.value = e.detail.value;
    });

    console.log('✅ TouchSpin Web Component Demo initialized');
    console.log('Available events:', events);
  </script>
</body>
</html>