<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Simple TouchSpin jQuery Wrapper Test</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    .container { max-width: 1000px; margin-top: 50px; }
    .btn:not(.input-group .btn) { margin: 2px; }
  </style>
</head>
<body>
  <div class="container">
    <h1>Simple TouchSpin jQuery Wrapper Test</h1>
    <p>Testing the updated jQuery wrapper with new TouchSpin core.</p>

    <!-- Simple TouchSpin input with Bootstrap styling -->
    <div class="mb-4">
      <label for="simple-input" class="form-label">Number Input:</label>
      <input id="simple-input" type="text" value="50" class="form-control" style="width: 200px;">
    </div>

    <!-- jQuery API Test Buttons -->
    <div class="mb-3">
      <button class="btn btn-primary" onclick="$('#simple-input').TouchSpin('uponce')">Up Once</button>
      <button class="btn btn-primary" onclick="$('#simple-input').TouchSpin('downonce')">Down Once</button>
      <button class="btn btn-secondary" onclick="$('#simple-input').TouchSpin('startupspin')">Start Up Spin</button>
      <button class="btn btn-secondary" onclick="$('#simple-input').TouchSpin('startdownspin')">Start Down Spin</button>
      <button class="btn btn-danger" onclick="$('#simple-input').TouchSpin('stopspin')">Stop Spin</button>
    </div>

    <div class="mb-3">
      <button class="btn btn-info" onclick="alert('Value: ' + $('#simple-input').TouchSpin('get'))">Get Value</button>
      <button class="btn btn-info" onclick="$('#simple-input').TouchSpin('set', 100)">Set to 100</button>
      <button class="btn btn-warning" onclick="$('#simple-input').trigger('touchspin.updatesettings', [{step: 10}])">Set Step=10</button>
      <button class="btn btn-warning" onclick="$('#simple-input').trigger('touchspin.updatesettings', [{step: 1}])">Set Step=1</button>
    </div>

    <!-- Prefix/Postfix Test Buttons -->
    <div class="mb-3">
      <h6>Prefix/Postfix Tests:</h6>
      <button class="btn btn-outline-success btn-sm" onclick="$('#simple-input').trigger('touchspin.updatesettings', [{prefix: '$'}])">Add Prefix ($)</button>
      <button class="btn btn-outline-success btn-sm" onclick="$('#simple-input').trigger('touchspin.updatesettings', [{postfix: 'USD'}])">Add Postfix (USD)</button>
      <button class="btn btn-outline-success btn-sm" onclick="$('#simple-input').trigger('touchspin.updatesettings', [{prefix: '‚Ç¨', postfix: 'EUR'}])">Set ‚Ç¨ EUR</button>
      <button class="btn btn-outline-danger btn-sm" onclick="$('#simple-input').trigger('touchspin.updatesettings', [{prefix: ''}])">Clear Prefix</button>
      <button class="btn btn-outline-danger btn-sm" onclick="$('#simple-input').trigger('touchspin.updatesettings', [{postfix: ''}])">Clear Postfix</button>
      <button class="btn btn-outline-danger btn-sm" onclick="$('#simple-input').trigger('touchspin.updatesettings', [{prefix: '', postfix: ''}])">Clear Both</button>
    </div>

    <div class="mb-3">
      <button class="btn btn-success" onclick="initTouchSpin()">Initialize</button>
      <button class="btn btn-outline-danger" onclick="$('#simple-input').TouchSpin('destroy')">Destroy</button>
    </div>

    <!-- Simple Input Callable Events -->
    <div class="mb-3">
      <h6>Simple Input - Callable Events (via .trigger()):</h6>
      <button class="btn btn-outline-primary btn-sm" onclick="$('#simple-input').trigger('touchspin.uponce')">trigger('touchspin.uponce')</button>
      <button class="btn btn-outline-primary btn-sm" onclick="$('#simple-input').trigger('touchspin.downonce')">trigger('touchspin.downonce')</button>
      <button class="btn btn-outline-secondary btn-sm" onclick="$('#simple-input').trigger('touchspin.startupspin')">trigger('touchspin.startupspin')</button>
      <button class="btn btn-outline-secondary btn-sm" onclick="$('#simple-input').trigger('touchspin.startdownspin')">trigger('touchspin.startdownspin')</button>
      <button class="btn btn-outline-danger btn-sm" onclick="$('#simple-input').trigger('touchspin.stopspin')">trigger('touchspin.stopspin')</button>
    </div>

    <!-- Direct API Access via Core -->
    <div class="mb-3">
      <h6>Simple Input - Direct Core Access (for comparison):</h6>
      <button class="btn btn-outline-primary btn-sm" onclick="getDirectApi()?.upOnce()">Direct Up Once</button>
      <button class="btn btn-outline-info btn-sm" onclick="alert('Direct Value: ' + (getDirectApi()?.getValue() ?? 'Not initialized'))">Direct Get Value</button>
    </div>

    <!-- Advanced Input Group Test -->
    <hr>
    <div class="mb-4">
      <h5>Advanced Input Group Test</h5>
      <p>This input is already wrapped in an input-group with existing prefix and postfix elements.</p>
      
      <div class="input-group" style="max-width: 300px;">
        <span class="input-group-text">üåç</span>
        <input id="advanced-input" type="number" value="25" class="form-control">
        <span class="input-group-text">km</span>
      </div>
    </div>

    <!-- Advanced Input Group Controls -->
    <div class="mb-3">
      <button class="btn btn-success" onclick="initAdvancedTouchSpin()">Initialize Advanced</button>
      <button class="btn btn-outline-danger" onclick="$('#advanced-input').TouchSpin('destroy')">Destroy Advanced</button>
    </div>

    <!-- Advanced Prefix/Postfix Test Buttons -->
    <div class="mb-3">
      <h6>Advanced Prefix/Postfix Tests:</h6>
      <button class="btn btn-outline-success btn-sm" onclick="$('#advanced-input').trigger('touchspin.updatesettings', [{prefix: '$'}])">Add TouchSpin Prefix ($)</button>
      <button class="btn btn-outline-success btn-sm" onclick="$('#advanced-input').trigger('touchspin.updatesettings', [{postfix: 'USD'}])">Add TouchSpin Postfix (USD)</button>
      <button class="btn btn-outline-success btn-sm" onclick="$('#advanced-input').trigger('touchspin.updatesettings', [{prefix: '‚Ç¨', postfix: 'EUR'}])">Set ‚Ç¨ EUR</button>
      <button class="btn btn-outline-danger btn-sm" onclick="$('#advanced-input').trigger('touchspin.updatesettings', [{prefix: ''}])">Clear TouchSpin Prefix</button>
      <button class="btn btn-outline-danger btn-sm" onclick="$('#advanced-input').trigger('touchspin.updatesettings', [{postfix: ''}])">Clear TouchSpin Postfix</button>
    </div>

    <!-- Advanced Input Callable Events -->
    <div class="mb-3">
      <h6>Advanced Input - Callable Events (via .trigger()):</h6>
      <button class="btn btn-outline-primary btn-sm" onclick="$('#advanced-input').trigger('touchspin.uponce')">trigger('touchspin.uponce')</button>
      <button class="btn btn-outline-primary btn-sm" onclick="$('#advanced-input').trigger('touchspin.downonce')">trigger('touchspin.downonce')</button>
      <button class="btn btn-outline-secondary btn-sm" onclick="$('#advanced-input').trigger('touchspin.startupspin')">trigger('touchspin.startupspin')</button>
      <button class="btn btn-outline-secondary btn-sm" onclick="$('#advanced-input').trigger('touchspin.startdownspin')">trigger('touchspin.startdownspin')</button>
      <button class="btn btn-outline-danger btn-sm" onclick="$('#advanced-input').trigger('touchspin.stopspin')">trigger('touchspin.stopspin')</button>
    </div>


    <div class="mt-4">
      <p><strong>Instructions:</strong></p>
      <ul>
        <li>Click "Initialize" to set up TouchSpin via jQuery</li>
        <li><strong>Focus the input and use arrow keys (‚Üë‚Üì)</strong></li>
        <li><strong>Focus the input and use mouse wheel</strong></li>
        <li>Test jQuery Command API (TouchSpin('command')) with first set of buttons</li>
        <li>Test jQuery Callable Events (trigger('touchspin.event')) with second set of buttons</li>
        <li>Compare with direct core API access</li>
      </ul>
      
    </div>
  </div>

  <!-- jQuery -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  
  <!-- Install the jQuery plugin wrapper (core-based) -->
  <script type="module">
    import { installJqueryTouchSpin } from '../../packages/jquery-plugin/src/index.js';
    import { getTouchSpin } from '../../packages/core/src/index.js';
    import Bootstrap5Renderer from '../../packages/renderers/bootstrap5/src/Bootstrap5Renderer.js';
    
    // Install jQuery plugin
    installJqueryTouchSpin(window.jQuery);

    // Set global default renderer - no need to specify on each TouchSpin call
    globalThis.TouchSpinDefaultRenderer = Bootstrap5Renderer;

    // Helper to get direct core API instance from the input (for comparison)
    window.getDirectApi = function() {
      const input = document.getElementById('simple-input');
      return getTouchSpin(input);
    };

    // One-line jQuery initialization
    window.initTouchSpin = function() {
      const $input = $('#simple-input');
      
      // Initialize via jQuery wrapper with global default renderer
      $input.TouchSpin({ 
        min: 0, 
        max: 200, 
        step: 1 
      });
    };

    // Advanced input group initialization
    window.initAdvancedTouchSpin = function() {
      const $input = $('#advanced-input');
      
      // Initialize TouchSpin on input that's already in an input-group
      $input.TouchSpin({
        min: 0,
        max: 500,
        step: 5,
        prefix: '', // Start with no TouchSpin prefix
        postfix: ''  // Start with no TouchSpin postfix  
      });
    };

    // Auto-initialize both inputs on page load
    document.addEventListener('DOMContentLoaded', function() {
      initTouchSpin();
      initAdvancedTouchSpin();
    });
  </script>
</body>
</html>