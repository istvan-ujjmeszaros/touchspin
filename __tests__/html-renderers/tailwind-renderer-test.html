<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Tailwind Renderer Tests</title>
  <script src="../html/assets/tailwind/tailwind.min.js"></script>
  <script src="../html/assets/jquery/jquery-3.7.1.min.js"></script>

  <style>
    .test-section {
      @apply m-5 p-4 border border-gray-300 rounded;
    }
    .controls {
      @apply mt-3 flex flex-wrap gap-2;
    }
    .controls button {
      @apply text-xs px-2 py-1 m-1;
    }
    h4 { @apply text-lg font-semibold mt-0; }

    /* Visible styling for prefix extra classes */
    .tw-test-prefix-extra,
    .tw-initial-prefix,
    .tw-updated-prefix,
    .tw-combined-prefix,
    .tw-all-prefix {
      outline: 2px solid #ff6b6b !important;
      background-color: #ffe0e0 !important;
      font-weight: bold !important;
    }

    /* Visible styling for postfix extra classes */
    .tw-test-postfix-extra,
    .tw-initial-postfix,
    .tw-updated-postfix,
    .tw-combined-postfix,
    .tw-all-postfix {
      outline: 2px solid #4ecdc4 !important;
      background-color: #e0fffd !important;
      font-weight: bold !important;
    }
  </style>

  <!-- Install the core-backed jQuery wrapper -->
  <script type="module">
    import { installJqueryTouchSpin } from '/packages/jquery-plugin/dist/index.js';
    import TailwindRenderer from '/packages/renderers/tailwind/dist/index.mjs';

    installJqueryTouchSpin(window.jQuery);

    // Set global default renderer
    globalThis.TouchSpinDefaultRenderer = TailwindRenderer;

    // Keep for backwards compatibility with tests
    window.TailwindRenderer = TailwindRenderer;

    document.addEventListener('DOMContentLoaded', function() {
      const $ = window.jQuery;

      // Initialize inputs
      $('#input-basic').TouchSpin({
        min: 0,
        max: 100
      });

      $('#input-with-prefix').TouchSpin({
        prefix: '$',
        postfix: '.00',
        prefix_extraclass: 'tw-initial-prefix',
        postfix_extraclass: 'tw-initial-postfix',
        min: 0,
        max: 100
      });

      $('#input-advanced').TouchSpin({
        min: 0,
        max: 200
      });

      $('#input-vertical').TouchSpin({
        verticalbuttons: true,
        min: 0,
        max: 20
      });

      // Button handlers for basic input
      document.querySelector('[data-testid="basic-update-prefix"]').addEventListener('click', () => {
        $('#input-basic').trigger('touchspin.updatesettings', [{ prefix: '$' }]);
      });

      document.querySelector('[data-testid="basic-update-postfix"]').addEventListener('click', () => {
        $('#input-basic').trigger('touchspin.updatesettings', [{ postfix: '.00' }]);
      });

      document.querySelector('[data-testid="basic-clear-prefix"]').addEventListener('click', () => {
        $('#input-basic').trigger('touchspin.updatesettings', [{ prefix: '' }]);
      });

      document.querySelector('[data-testid="basic-clear-postfix"]').addEventListener('click', () => {
        $('#input-basic').trigger('touchspin.updatesettings', [{ postfix: '' }]);
      });

      document.querySelector('[data-testid="basic-update-prefix-class"]').addEventListener('click', () => {
        $('#input-basic').trigger('touchspin.updatesettings', [{ prefix_extraclass: 'tw-test-prefix-extra' }]);
      });

      document.querySelector('[data-testid="basic-update-postfix-class"]').addEventListener('click', () => {
        $('#input-basic').trigger('touchspin.updatesettings', [{ postfix_extraclass: 'tw-test-postfix-extra' }]);
      });

      document.querySelector('[data-testid="basic-clear-prefix-class"]').addEventListener('click', () => {
        $('#input-basic').trigger('touchspin.updatesettings', [{ prefix_extraclass: '' }]);
      });

      document.querySelector('[data-testid="basic-clear-postfix-class"]').addEventListener('click', () => {
        $('#input-basic').trigger('touchspin.updatesettings', [{ postfix_extraclass: '' }]);
      });

      document.querySelector('[data-testid="basic-update-up-text"]').addEventListener('click', () => {
        $('#input-basic').trigger('touchspin.updatesettings', [{ buttonup_txt: 'â–²' }]);
      });

      document.querySelector('[data-testid="basic-update-down-text"]').addEventListener('click', () => {
        $('#input-basic').trigger('touchspin.updatesettings', [{ buttondown_txt: 'â–¼' }]);
      });

      document.querySelector('[data-testid="basic-reset-button-text"]').addEventListener('click', () => {
        $('#input-basic').trigger('touchspin.updatesettings', [{ buttonup_txt: '+', buttondown_txt: 'âˆ’' }]);
      });

      document.querySelector('[data-testid="basic-update-all"]').addEventListener('click', () => {
        $('#input-basic').trigger('touchspin.updatesettings', [{
          prefix: 'USD',
          postfix: 'kg',
          prefix_extraclass: 'tw-combined-prefix',
          postfix_extraclass: 'tw-combined-postfix',
          buttonup_txt: 'â¬†',
          buttondown_txt: 'â¬‡'
        }]);
      });

      document.querySelector('[data-testid="basic-clear-all"]').addEventListener('click', () => {
        $('#input-basic').trigger('touchspin.updatesettings', [{
          prefix: '',
          postfix: '',
          prefix_extraclass: '',
          postfix_extraclass: '',
          buttonup_txt: '+',
          buttondown_txt: 'âˆ’'
        }]);
      });

      // Button handlers for prefixed input
      document.querySelector('[data-testid="prefixed-update-prefix"]').addEventListener('click', () => {
        $('#input-with-prefix').trigger('touchspin.updatesettings', [{ prefix: 'USD' }]);
      });

      document.querySelector('[data-testid="prefixed-update-postfix"]').addEventListener('click', () => {
        $('#input-with-prefix').trigger('touchspin.updatesettings', [{ postfix: 'kg' }]);
      });

      document.querySelector('[data-testid="prefixed-clear-prefix"]').addEventListener('click', () => {
        $('#input-with-prefix').trigger('touchspin.updatesettings', [{ prefix: '' }]);
      });

      document.querySelector('[data-testid="prefixed-clear-postfix"]').addEventListener('click', () => {
        $('#input-with-prefix').trigger('touchspin.updatesettings', [{ postfix: '' }]);
      });

      document.querySelector('[data-testid="prefixed-update-prefix-class"]').addEventListener('click', () => {
        $('#input-with-prefix').trigger('touchspin.updatesettings', [{ prefix_extraclass: 'tw-updated-prefix' }]);
      });

      document.querySelector('[data-testid="prefixed-update-postfix-class"]').addEventListener('click', () => {
        $('#input-with-prefix').trigger('touchspin.updatesettings', [{ postfix_extraclass: 'tw-updated-postfix' }]);
      });

      document.querySelector('[data-testid="prefixed-clear-prefix-class"]').addEventListener('click', () => {
        $('#input-with-prefix').trigger('touchspin.updatesettings', [{ prefix_extraclass: '' }]);
      });

      document.querySelector('[data-testid="prefixed-clear-postfix-class"]').addEventListener('click', () => {
        $('#input-with-prefix').trigger('touchspin.updatesettings', [{ postfix_extraclass: '' }]);
      });

      document.querySelector('[data-testid="prefixed-update-up-text"]').addEventListener('click', () => {
        $('#input-with-prefix').trigger('touchspin.updatesettings', [{ buttonup_txt: 'â†‘' }]);
      });

      document.querySelector('[data-testid="prefixed-update-down-text"]').addEventListener('click', () => {
        $('#input-with-prefix').trigger('touchspin.updatesettings', [{ buttondown_txt: 'â†“' }]);
      });

      document.querySelector('[data-testid="prefixed-reset-button-text"]').addEventListener('click', () => {
        $('#input-with-prefix').trigger('touchspin.updatesettings', [{ buttonup_txt: '+', buttondown_txt: 'âˆ’' }]);
      });

      document.querySelector('[data-testid="prefixed-update-all"]').addEventListener('click', () => {
        $('#input-with-prefix').trigger('touchspin.updatesettings', [{
          prefix: 'ALL',
          postfix: 'NEW',
          prefix_extraclass: 'tw-all-prefix',
          postfix_extraclass: 'tw-all-postfix',
          buttonup_txt: 'ðŸ“ˆ',
          buttondown_txt: 'ðŸ“‰'
        }]);
      });

      document.querySelector('[data-testid="prefixed-clear-all"]').addEventListener('click', () => {
        $('#input-with-prefix').trigger('touchspin.updatesettings', [{
          prefix: '',
          postfix: '',
          prefix_extraclass: '',
          postfix_extraclass: '',
          buttonup_txt: '+',
          buttondown_txt: 'âˆ’'
        }]);
      });

      // Button handlers for advanced input
      document.querySelector('[data-testid="advanced-update-prefix"]').addEventListener('click', () => {
        $('#input-advanced').trigger('touchspin.updatesettings', [{ prefix: '$' }]);
      });

      document.querySelector('[data-testid="advanced-update-postfix"]').addEventListener('click', () => {
        $('#input-advanced').trigger('touchspin.updatesettings', [{ postfix: 'USD' }]);
      });

      document.querySelector('[data-testid="advanced-clear-prefix"]').addEventListener('click', () => {
        $('#input-advanced').trigger('touchspin.updatesettings', [{ prefix: '' }]);
      });

      document.querySelector('[data-testid="advanced-clear-postfix"]').addEventListener('click', () => {
        $('#input-advanced').trigger('touchspin.updatesettings', [{ postfix: '' }]);
      });

      // Button handlers for vertical input
      document.querySelector('[data-testid="vertical-update-up-class"]').addEventListener('click', () => {
        $('#input-vertical').trigger('touchspin.updatesettings', [{ verticalupclass: 'bg-green-500' }]);
      });

      document.querySelector('[data-testid="vertical-update-down-class"]').addEventListener('click', () => {
        $('#input-vertical').trigger('touchspin.updatesettings', [{ verticaldownclass: 'bg-red-500' }]);
      });

      document.querySelector('[data-testid="vertical-update-up-text"]').addEventListener('click', () => {
        $('#input-vertical').trigger('touchspin.updatesettings', [{ verticalup: 'â¬†' }]);
      });

      document.querySelector('[data-testid="vertical-update-down-text"]').addEventListener('click', () => {
        $('#input-vertical').trigger('touchspin.updatesettings', [{ verticaldown: 'â¬‡' }]);
      });
    });
  </script>
</head>
<body class="container mx-auto p-4">
  <h1 class="text-2xl font-bold mb-4">Tailwind Renderer Test Page</h1>

  <!-- Basic input without prefix/postfix -->
  <div class="test-section">
    <h4>Basic Input (no initial prefix/postfix)</h4>
    <div data-testid="basic-container">
      <input data-testid="input-basic" id="input-basic" type="text" value="10" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" />
    </div>
    <div class="controls">
      <!-- Prefix/Postfix controls -->
      <button data-testid="basic-update-prefix" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-1 px-2 rounded">Update Prefix ($)</button>
      <button data-testid="basic-update-postfix" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-1 px-2 rounded">Update Postfix (.00)</button>
      <button data-testid="basic-clear-prefix" class="bg-gray-500 hover:bg-gray-700 text-white font-bold py-1 px-2 rounded">Clear Prefix</button>
      <button data-testid="basic-clear-postfix" class="bg-gray-500 hover:bg-gray-700 text-white font-bold py-1 px-2 rounded">Clear Postfix</button>

      <!-- Extra class controls -->
      <button data-testid="basic-update-prefix-class" class="bg-cyan-500 hover:bg-cyan-700 text-white font-bold py-1 px-2 rounded">Add Prefix Class</button>
      <button data-testid="basic-update-postfix-class" class="bg-cyan-500 hover:bg-cyan-700 text-white font-bold py-1 px-2 rounded">Add Postfix Class</button>
      <button data-testid="basic-clear-prefix-class" class="bg-yellow-500 hover:bg-yellow-700 text-white font-bold py-1 px-2 rounded">Clear Prefix Class</button>
      <button data-testid="basic-clear-postfix-class" class="bg-yellow-500 hover:bg-yellow-700 text-white font-bold py-1 px-2 rounded">Clear Postfix Class</button>

      <!-- Button text controls -->
      <button data-testid="basic-update-up-text" class="bg-green-500 hover:bg-green-700 text-white font-bold py-1 px-2 rounded">Update Up Text (â–²)</button>
      <button data-testid="basic-update-down-text" class="bg-green-500 hover:bg-green-700 text-white font-bold py-1 px-2 rounded">Update Down Text (â–¼)</button>
      <button data-testid="basic-reset-button-text" class="bg-gray-500 hover:bg-gray-700 text-white font-bold py-1 px-2 rounded">Reset Button Text</button>

      <!-- Combined controls -->
      <button data-testid="basic-update-all" class="bg-red-500 hover:bg-red-700 text-white font-bold py-1 px-2 rounded">Update All</button>
      <button data-testid="basic-clear-all" class="bg-gray-500 hover:bg-gray-700 text-white font-bold py-1 px-2 rounded">Clear All</button>
    </div>
  </div>

  <!-- Input with initial prefix/postfix -->
  <div class="test-section">
    <h4>Input with Initial Prefix/Postfix</h4>
    <div data-testid="prefixed-container">
      <input data-testid="input-with-prefix" id="input-with-prefix" type="text" value="25" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" />
    </div>
    <div class="controls">
      <!-- Prefix/Postfix controls -->
      <button data-testid="prefixed-update-prefix" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-1 px-2 rounded">Update Prefix (USD)</button>
      <button data-testid="prefixed-update-postfix" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-1 px-2 rounded">Update Postfix (kg)</button>
      <button data-testid="prefixed-clear-prefix" class="bg-gray-500 hover:bg-gray-700 text-white font-bold py-1 px-2 rounded">Clear Prefix</button>
      <button data-testid="prefixed-clear-postfix" class="bg-gray-500 hover:bg-gray-700 text-white font-bold py-1 px-2 rounded">Clear Postfix</button>

      <!-- Extra class controls -->
      <button data-testid="prefixed-update-prefix-class" class="bg-cyan-500 hover:bg-cyan-700 text-white font-bold py-1 px-2 rounded">Update Prefix Class</button>
      <button data-testid="prefixed-update-postfix-class" class="bg-cyan-500 hover:bg-cyan-700 text-white font-bold py-1 px-2 rounded">Update Postfix Class</button>
      <button data-testid="prefixed-clear-prefix-class" class="bg-yellow-500 hover:bg-yellow-700 text-white font-bold py-1 px-2 rounded">Clear Prefix Class</button>
      <button data-testid="prefixed-clear-postfix-class" class="bg-yellow-500 hover:bg-yellow-700 text-white font-bold py-1 px-2 rounded">Clear Postfix Class</button>

      <!-- Button text controls -->
      <button data-testid="prefixed-update-up-text" class="bg-green-500 hover:bg-green-700 text-white font-bold py-1 px-2 rounded">Update Up Text (â†‘)</button>
      <button data-testid="prefixed-update-down-text" class="bg-green-500 hover:bg-green-700 text-white font-bold py-1 px-2 rounded">Update Down Text (â†“)</button>
      <button data-testid="prefixed-reset-button-text" class="bg-gray-500 hover:bg-gray-700 text-white font-bold py-1 px-2 rounded">Reset Button Text</button>

      <!-- Combined controls -->
      <button data-testid="prefixed-update-all" class="bg-red-500 hover:bg-red-700 text-white font-bold py-1 px-2 rounded">Update All</button>
      <button data-testid="prefixed-clear-all" class="bg-gray-500 hover:bg-gray-700 text-white font-bold py-1 px-2 rounded">Clear All</button>
    </div>
  </div>

  <!-- Advanced container (existing wrapper) -->
  <div class="test-section">
    <h4>Advanced Container (existing wrapper)</h4>
    <div data-testid="advanced-container" class="flex rounded-md shadow-sm">
      <span class="inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500 text-sm">â‚¬</span>
      <input data-testid="input-advanced" id="input-advanced" type="text" value="50" class="flex-1 block w-full px-3 py-2 border border-gray-300 rounded-none focus:outline-none focus:ring-2 focus:ring-blue-500" />
      <span class="inline-flex items-center px-3 rounded-r-md border border-l-0 border-gray-300 bg-gray-50 text-gray-500 text-sm">EUR</span>
    </div>
    <div class="controls">
      <button data-testid="advanced-update-prefix" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-1 px-2 rounded">Update Prefix ($)</button>
      <button data-testid="advanced-update-postfix" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-1 px-2 rounded">Update Postfix (USD)</button>
      <button data-testid="advanced-clear-prefix" class="bg-gray-500 hover:bg-gray-700 text-white font-bold py-1 px-2 rounded">Clear Prefix</button>
      <button data-testid="advanced-clear-postfix" class="bg-gray-500 hover:bg-gray-700 text-white font-bold py-1 px-2 rounded">Clear Postfix</button>
    </div>
  </div>

  <!-- Vertical buttons test -->
  <div class="test-section">
    <h4>Vertical Buttons</h4>
    <div data-testid="vertical-container">
      <input data-testid="input-vertical" id="input-vertical" type="text" value="5" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" />
    </div>
    <div class="controls">
      <button data-testid="vertical-update-up-class" class="bg-cyan-500 hover:bg-cyan-700 text-white font-bold py-1 px-2 rounded">Update Up Class</button>
      <button data-testid="vertical-update-down-class" class="bg-cyan-500 hover:bg-cyan-700 text-white font-bold py-1 px-2 rounded">Update Down Class</button>
      <button data-testid="vertical-update-up-text" class="bg-green-500 hover:bg-green-700 text-white font-bold py-1 px-2 rounded">Update Up Text (â¬†)</button>
      <button data-testid="vertical-update-down-text" class="bg-green-500 hover:bg-green-700 text-white font-bold py-1 px-2 rounded">Update Down Text (â¬‡)</button>
    </div>
  </div>

</body>
</html>
