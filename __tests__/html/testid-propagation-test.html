<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>TestID Propagation Test</title>

  <script src="assets/jquery/jquery-3.7.1.min.js"></script>
  
  <!-- BOOTSTRAP 5 -->
  <link href="assets/bootstrap/bootstrap-5.3.2.min.css" rel="stylesheet">
  <script src="assets/bootstrap/bootstrap-5.3.2.bundle.min.js"></script>

  <!-- Load source CSS -->
  <link href="../../src/jquery.bootstrap-touchspin.css" rel="stylesheet" type="text/css" media="all">
  <!-- Load source renderer files -->
  <script src="../../src/renderers/AbstractRenderer.js"></script>
  <script src="../../src/renderers/Bootstrap5Renderer.js"></script>
  
  <!-- Create Bootstrap 5 RendererFactory -->
  <script>
    window.RendererFactory = class {
      static createRenderer($, settings, originalinput) {
        return new Bootstrap5Renderer($, settings, originalinput);
      }
      
      static getVersion() {
        return 5;
      }
    };
  </script>
  
  <!-- Load main TouchSpin source file -->
  <script src="../../src/jquery.bootstrap-touchspin.js"></script>
</head>

<body>
<div class="container">
  <h1>TestID Propagation Test</h1>
  
  <!-- Test case 1: New input group creation -->
  <div class="mb-3">
    <label for="test-input-1" class="form-label">Test Input 1 (New wrapper):</label>
    <input id="test-input-1" data-testid="test-input-1" type="text" class="form-control" value="50">
  </div>

  <!-- Test case 2: Existing input-group enhancement -->
  <div class="mb-3">
    <label for="test-input-2" class="form-label">Test Input 2 (Existing input-group):</label>
    <div class="input-group">
      <span class="input-group-text">$</span>
      <input id="test-input-2" data-testid="test-input-2" type="text" class="form-control" value="100">
      <span class="input-group-text">.00</span>
    </div>
  </div>

  <!-- Test case 3: Vertical buttons -->
  <div class="mb-3">
    <label for="test-input-3" class="form-label">Test Input 3 (Vertical buttons):</label>
    <input id="test-input-3" data-testid="test-input-3" type="text" class="form-control" value="25">
  </div>

  <!-- Test case 4: No testid (should not create wrapper testid) -->
  <div class="mb-3">
    <label for="test-input-4" class="form-label">Test Input 4 (No testid):</label>
    <input id="test-input-4" type="text" class="form-control" value="75">
  </div>

  <script>
    $(document).ready(function() {
      console.log('Initializing TouchSpin instances...');
      
      // Test case 1: Regular TouchSpin (should create new wrapper with testid)
      $('#test-input-1').TouchSpin();
      
      // Test case 2: Existing input-group (should add testid to existing wrapper)
      $('#test-input-2').TouchSpin();
      
      // Test case 3: Vertical buttons (should create wrapper with testid)
      $('#test-input-3').TouchSpin({
        verticalbuttons: true
      });
      
      // Test case 4: No testid (should not create wrapper testid)
      $('#test-input-4').TouchSpin();
      
      console.log('TouchSpin initialization complete');
    });
  </script>
</div>


<!-- Blur target for tests -->
<button id="blur-target" type="button" style="position:absolute;left:-9999px;top:-9999px;">blur</button>

</body>
</html>