<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Settings Precedence: Data Attributes</title>
  <script src="assets/jquery/jquery-3.7.1.min.js"></script>

  <!-- BOOTSTRAP 5 -->
  <link href="assets/bootstrap/bootstrap-5.3.2.min.css" rel="stylesheet">
  <script src="assets/bootstrap/bootstrap-5.3.2.bundle.min.js"></script>

  <link href="../../packages/renderers/bootstrap5/dist/touchspin-bootstrap5.css" rel="stylesheet">
</head>

<body>
  <div class="container">
    <h1>Settings Precedence: Data Attributes</h1>

    <!-- Test: Data attributes should be respected -->
    <div class="test-group">
      <label for="test-data-attrs">Data Attributes Test:</label>
      <input id="test-data-attrs" data-testid="test-data-attrs" type="text" value="0" class="form-control"
             data-bts-prefix="DATA-PREFIX-"
             data-bts-postfix="-DATA-POSTFIX"
             data-bts-step="5"
             data-bts-min="0"
             data-bts-max="100">
    </div>

    <!-- Test: JavaScript settings should override data attributes -->
    <div class="test-group">
      <label for="test-js-override">JS Should Override Data Attrs:</label>
      <input id="test-js-override" data-testid="test-js-override" type="text" value="0" class="form-control"
             data-bts-prefix="DATA-PREFIX"
             data-bts-step="1">
    </div>
  </div>

  <!-- Load TouchSpin modern packages -->
  <script type="module">
    import { installJqueryTouchSpin } from '../../packages/jquery-plugin/src/index.js';
    import Bootstrap5Renderer from '../../packages/renderers/bootstrap5/src/Bootstrap5Renderer.js';

    // Install jQuery plugin
    installJqueryTouchSpin(window.jQuery);

    // Set global default renderer - no need to specify on each TouchSpin call
    globalThis.TouchSpinDefaultRenderer = Bootstrap5Renderer;

    // Keep for backwards compatibility with tests
    window.Bootstrap5Renderer = Bootstrap5Renderer;
    window.modernTouchSpinInstalled = true;

    // Initialize inputs to test data attribute precedence
    document.addEventListener('DOMContentLoaded', function() {
      // Test 1: Initialize with no JS settings - should use data attributes
      $("#test-data-attrs").TouchSpin();

      // Test 2: JS settings should override data attributes
      $("#test-js-override").TouchSpin({
        prefix: 'JS-PREFIX-',  // Should override data-bts-prefix="DATA-PREFIX"
        step: 10               // Should override data-bts-step="1"
      });
    });
  </script>
</body>
</html>
