<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>TouchSpin - Test Renderer</title>

  <script src="assets/jquery/jquery-3.7.1.min.js"></script>

  <!-- BOOTSTRAP 5 (for basic styling) -->
  <link href="assets/bootstrap/bootstrap-5.3.2.min.css" rel="stylesheet">
  <script src="assets/bootstrap/bootstrap-5.3.2.bundle.min.js"></script>

  <!-- Load source CSS -->
  <link href="../../src/jquery.bootstrap-touchspin.css" rel="stylesheet" type="text/css" media="all">
  
  <!-- Load modern TouchSpin packages directly -->
  <script type="module">
    import { installJqueryTouchSpin } from '../../packages/jquery-plugin/src/index.js';
    
    // Load TestRenderer
    const TestRendererModule = await import('./TestRenderer.js');
    const TestRenderer = TestRendererModule.default || TestRendererModule.TestRenderer;
    
    // Install jQuery plugin
    installJqueryTouchSpin(window.jQuery);
    
    // Set global default renderer - no need to specify on each TouchSpin call
    globalThis.TouchSpinDefaultRenderer = TestRenderer;
    
    // Keep for backwards compatibility with tests
    window.TestRenderer = TestRenderer;
    window.modernTouchSpinInstalled = true;

    // Initialize all TouchSpin instances after plugin is loaded
    document.addEventListener('DOMContentLoaded', function() {
      $("#test_basic").TouchSpin({
        min: 0,
        max: 100,
        step: 1
      });

      $("#test_prefix_postfix").TouchSpin({
        min: 0,
        max: 100,
        step: 5,
        prefix: '$',
        postfix: '.00'
      });

      $("#test_target").TouchSpin({
        min: 0,
        max: 1000,
        step: 1,
        prefix: 'Test:',
        postfix: 'pts'
      });

      $("#test_vertical").TouchSpin({
        min: 0,
        max: 50,
        step: 2,
        verticalbuttons: true,
        verticalup: '▲',
        verticaldown: '▼'
      });

      $("#test_decimals").TouchSpin({
        min: 0,
        max: 100,
        step: 0.25,
        decimals: 2
      });
    });
  </script>

</head>

<body>
<div class="container">
  <h1>TouchSpin - Test Renderer</h1>
  <p>This page uses a custom TestRenderer to verify renderer functionality.</p>

  <div class="row">
    <div class="col-md-6">
      <div class="wrapper mb-3">
        <label for="test_basic" class="form-label">Basic Test Renderer:</label>
        <input id="test_basic" data-testid="test-basic" type="text" value="50" name="test_basic" class="form-control">

      </div>

      <div class="wrapper mb-3">
        <label for="test_prefix_postfix" class="form-label">With Prefix/Postfix:</label>
        <input id="test_prefix_postfix" data-testid="test-prefix-postfix" type="text" value="25" name="test_prefix_postfix" class="form-control">

      </div>

      <div class="wrapper mb-3">
        <label for="test_target" class="form-label">Test Target (for automated tests):</label>
        <input id="test_target" data-testid="test-target" type="text" value="42" name="test_target" class="form-control">

      </div>
    </div>

    <div class="col-md-6">
      <div class="wrapper mb-3">
        <label for="test_vertical" class="form-label">Vertical Buttons:</label>
        <input id="test_vertical" data-testid="test-vertical" type="text" value="10" name="test_vertical" class="form-control">

      </div>

      <div class="wrapper mb-3">
        <label for="test_decimals" class="form-label">With Decimals:</label>
        <input id="test_decimals" data-testid="test-decimals" type="text" value="12.50" name="test_decimals" class="form-control">

      </div>
    </div>
  </div>

</div>
</body>
</html>